"use strict";(self.webpackChunkshmooz=self.webpackChunkshmooz||[]).push([[9412],{69412:function(e,r,n){n.r(r),n.d(r,{default:function(){return qe}});var a=n(93433),t=n(4942),i=n(45987),l=n(1413),s=n(29439),o=n(47313),u=n(9506),d=n(5297),c=n(65280),m=n(24193),v=n(85281),p=n(79429),h=n(16031),x=n.n(h),b=n(3463),g=n(2135),f=n(24631),y=n(46417),Z=["errorText"];function j(e){e.errorText;var r=(0,i.Z)(e,Z),n=(0,p.U$)(e),a=(0,s.Z)(n,2),t=a[0],o=a[1];return(0,y.jsx)(f.Z,(0,l.Z)((0,l.Z)({type:"text",error:o.touched&&o.error&&!0,helperText:function(){var e=(0,h.at)(o,"touched","error"),r=(0,s.Z)(e,2),n=r[0],a=r[1];return n&&a?a:null}()},t),r))}var k=n(15480),S=n(1550),C=n(83929),E=n(44758),P=["label"];function _(e){var r=e.label,n=(0,i.Z)(e,P),a=(0,p.U$)(e),t=(0,s.Z)(a,3),o=t[0],u=t[1],d=t[2].setValue,c=function(){var e=(0,h.at)(u,"touched","error"),r=(0,s.Z)(e,2),n=r[0],a=r[1];return n&&a?(0,y.jsx)(k.Z,{children:a}):null};return(0,y.jsxs)(S.Z,(0,l.Z)((0,l.Z)({},n),{},{children:[(0,y.jsx)(C.Z,{value:o.checked,checked:o.checked,control:(0,y.jsx)(E.Z,(0,l.Z)((0,l.Z)({},o),{},{onChange:function(e){d(e.target.checked)}})),label:r}),(0,y.jsx)(c,{})]}))}var w=n(51405),N=["data"];function V(e){var r=e.data,n=(0,i.Z)(e,N),a=(0,p.U$)(e),t=(0,s.Z)(a,2),o=t[0],u=t[1],d=o.value,c=(0,h.at)(u,"touched","error"),m=(0,s.Z)(c,2),v=m[0],x=m[1],b=v&&x&&!0;return(0,y.jsx)(f.Z,(0,l.Z)((0,l.Z)((0,l.Z)({select:!0,error:u.touched&&u.error&&!0,helperText:b?(0,y.jsx)(k.Z,{children:x}):null},o),n),{},{value:d||"",children:r.map((function(e,r){return(0,y.jsx)(w.Z,{value:e.value,children:e.label},r)}))}))}V.defaultProps={data:[]};var A=V;n(30411);var F=n(81628),M=["label","value"];function q(e){e.label;var r=e.value,n=(0,i.Z)(e,M),a=(0,p.U$)(e),t=(0,s.Z)(a,3),l=(t[0],t[1],t[2].setValue);return(0,y.jsx)(F.Z,{attachments:r?[r]:[],setFieldValue:function(e,r){l(r||[])},fieldName:n.name})}n(70816);var T,O="checkoutForm",W={firstName:{name:"firstName",label:"First name*",requiredErrorMsg:"First name is required"},lastName:{name:"lastName",label:"Last name*",requiredErrorMsg:"Last name is required"},address1:{name:"address1",label:"Address Line 1*",requiredErrorMsg:"Address Line 1 is required"},address2:{name:"address2",label:"Address Line 2"},city:{name:"city",label:"City*",requiredErrorMsg:"City is required"},state:{name:"state",label:"State/Province/Region"},zipcode:{name:"zipcode",label:"Zipcode*",requiredErrorMsg:"Zipcode is required",invalidErrorMsg:"Zipcode is not valid (e.g. 70000)"},country:{name:"country",label:"Country*",requiredErrorMsg:"Country is required"},useAddressForPaymentDetails:{name:"useAddressForPaymentDetails",label:"Use this address for payment details"},nameOnCard:{name:"nameOnCard",label:"Name on card*",requiredErrorMsg:"Name on card is required"},cardNumber:{name:"cardNumber",label:"Card number*",requiredErrorMsg:"Card number is required",invalidErrorMsg:"Card number is not valid (e.g. 4111111111111)"},expiryDate:{name:"expiryDate",label:"Expiry date*",requiredErrorMsg:"Expiry date is required",invalidErrorMsg:"Expiry date is not valid"},cvv:{name:"cvv",label:"CVV*",requiredErrorMsg:"CVV is required",invalidErrorMsg:"CVV is invalid (e.g. 357)"}},z=W,D=(z.firstName,z.lastName,z.address1,z.city,z.zipcode,z.country,z.nameOnCard,z.cardNumber,z.expiryDate,z.cvv,[b.Ry().shape({}),b.Ry().shape({})]),B=W,R=B.firstName,L=B.lastName,I=B.address1,U=B.city,G=B.zipcode,$=B.country,H=B.useAddressForPaymentDetails,J=B.nameOnCard,K=B.cardNumber,Q=B.expiryDate,X=B.cvv,Y=(T={},(0,t.Z)(T,R.name,""),(0,t.Z)(T,L.name,""),(0,t.Z)(T,I.name,""),(0,t.Z)(T,U.name,""),(0,t.Z)(T,G.name,""),(0,t.Z)(T,$.name,""),(0,t.Z)(T,H.name,!1),(0,t.Z)(T,J.name,""),(0,t.Z)(T,K.name,""),(0,t.Z)(T,Q.name,""),(0,t.Z)(T,X.name,""),n(19860)),ee=function(e){return{stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},wrapper:{margin:e.spacing(1),position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%"}}},re=n(33497),ne=n(48384),ae=n(52306),te=n(9019),ie=n(61113),le=n(63318),se=function(e){var r,n,a,t=e.setting,i=null!==t&&void 0!==t&&t.details?null===(r=JSON.parse(null===t||void 0===t||null===(n=t.details)||void 0===n?void 0:n.replace(/\n/g,"")))||void 0===r?void 0:r.options:[],l=[];Array.isArray(i)&&i.length>0?l=i.map((function(e,r){return{value:r,label:e}})):i&&(null===(a=Object.keys(i))||void 0===a?void 0:a.length)>0&&Object.keys(i).forEach((function(e){l.push({value:e,label:i[e]})}));var o=(0,p.U$)(t.key),u=(0,s.Z)(o,3),d=u[0],c=(u[1],u[2].setValue);switch(t.type){case"text":return(0,y.jsx)(j,{name:t.key,label:t.display_name,fullWidth:!0});case"select_dropdown":return(0,y.jsx)(A,{name:t.key,label:t.display_name,data:l,fullWidth:!0});case"text_area":return(0,y.jsx)(j,{name:t.key,label:t.display_name,multiline:!0,fullWidth:!0});case"image":return(0,y.jsxs)(te.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,y.jsx)(te.ZP,{item:!0,xs:12,sm:4,children:(0,y.jsx)(ie.Z,{variant:"body2",children:t.display_name})}),(0,y.jsxs)(te.ZP,{item:!0,xs:12,sm:8,children:[(0,y.jsx)(q,{name:t.key,label:t.display_name,value:t.value}),";"]})]});case"checkbox":return(0,y.jsx)(_,{name:t.key,label:t.display_name,type:"checkbox"});case"double":return(0,y.jsx)(j,{name:t.key,label:t.display_name,type:"number",fullWidth:!0});case"double_range":return(0,y.jsxs)(te.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,y.jsx)(te.ZP,{item:!0,xs:12,sm:6,children:(0,y.jsx)(ie.Z,{variant:"caption",children:t.display_name})}),(0,y.jsx)(te.ZP,{item:!0,xs:12,sm:6,children:(0,y.jsx)(le.ZP,{name:t.key,value:d.value,onChange:function(e,r){c(r)},valueLabelDisplay:"auto",disableSwap:!0,marks:[{value:0,label:"0%"},{value:100,label:"100%"}]})})]});default:return(0,y.jsx)("div",{children:"Not Found"})}};function oe(e){var r=e.settings,n=e.tabName,t=o.useMemo((function(){return(0,a.Z)(r).sort((function(e,r){return e.order-r.order}))}),[r]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(ie.Z,{variant:"h6",gutterBottom:!0,children:n}),(0,y.jsx)(te.ZP,{container:!0,spacing:3,children:t.map((function(e){return(0,y.jsx)(te.ZP,{item:!0,xs:12,sm:6,children:(0,y.jsx)(se,{setting:e})},e.key)}))})]})}var ue=n(15861),de=n(64687),ce=n.n(de),me=n(50301),ve=n(94469),pe=n(33604),he=n(96467),xe=n(41727),be=n(4117),ge=n(43394),fe=n(97101),ye=n(12401),Ze=n(66182),je=n(85554),ke=n(5866),Se=[{value:"text",label:"Text"},{value:"select_dropdown",label:"Select"},{value:"text_area",label:"Text Area"},{value:"image",label:"Image"},{value:"checkbox",label:"Checkbox"},{value:"double",label:"Double"},{value:"double_range",label:"Range"}],Ce=(0,o.forwardRef)((function(e,r){return(0,y.jsx)(me.Z,(0,l.Z)({direction:"left",ref:r},e))})),Ee=b.Ry().shape({});function Pe(e){var r,n,a,t=e.setting,i=null!==t&&void 0!==t&&t.details?null===(r=JSON.parse(null===t||void 0===t||null===(n=t.details)||void 0===n?void 0:n.replace(/\n/g,"")))||void 0===r?void 0:r.options:[],l=[];switch(Array.isArray(i)&&i.length>0?l=i.map((function(e,r){return{value:r,label:e}})):i&&(null===(a=Object.keys(i))||void 0===a?void 0:a.length)>0&&Object.keys(i).forEach((function(e){l.push({value:e,label:i[e]})})),t.type){case"text":return(0,y.jsx)(j,{name:"value",label:"Value",fullWidth:!0});case"select_dropdown":return(0,y.jsx)(A,{name:"value",label:"Value",data:l,fullWidth:!0});case"text_area":return(0,y.jsx)(j,{name:"value",label:"Value",multiline:!0,fullWidth:!0});case"image":return(0,y.jsxs)(te.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,y.jsx)(te.ZP,{item:!0,xs:12,sm:4,children:(0,y.jsx)(ie.Z,{variant:"body2",children:t.display_name})}),(0,y.jsxs)(te.ZP,{item:!0,xs:12,sm:8,children:[(0,y.jsx)(q,{name:"value",label:"Value",value:t.value}),";"]})]});case"checkbox":return(0,y.jsx)(_,{name:"value",label:"Value",type:"checkbox"});case"double":return(0,y.jsx)(j,{name:"value",label:"Value",type:"number",fullWidth:!0});case"double_range":return(0,y.jsxs)(te.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,y.jsx)(te.ZP,{item:!0,xs:12,sm:6,children:(0,y.jsx)(ie.Z,{variant:"caption",children:t.display_name})}),(0,y.jsx)(te.ZP,{item:!0,xs:12,sm:6,children:(0,y.jsx)(le.ZP,{defaultValue:[20,37],valueLabelDisplay:"auto",disableSwap:!0,marks:[{value:0,label:"0%"},{value:100,label:"100%"}]})})]});default:return(0,y.jsx)("div",{children:"Not Found"})}}var _e=function(e){var r=e.open,n=e.handleCloseDialog,a=e.editingAdminSetting,t=void 0===a?{}:a,i=(0,je.I0)(),s=function(e){n(),i((0,ke.ss)({open:!0,message:"Admin Setting Updated successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"},close:!1}))},o=function(){var e=(0,ue.Z)(ce().mark((function e(r,n,a,t,i){return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(n,!0,!0);case 2:i(n,r[n].join(", "));case 3:case"end":return e.stop()}}),e)})));return function(r,n,a,t,i){return e.apply(this,arguments)}}(),d=function(e){var r=e.setFieldTouched,n=void 0===r?null:r,a=e.setErrors,t=void 0===a?null:a,i=e.setFieldError,l=void 0===i?null:i;return function(){var e=(0,ue.Z)(ce().mark((function e(r){var a,i,s,u,d;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===r||void 0===r||null===(a=r.data)||void 0===a||!a.errors){e.next=5;break}u=null===r||void 0===r||null===(s=r.data)||void 0===s?void 0:s.errors,Object.keys(u).forEach((function(e){o(u,e,n,t,l)})),e.next=9;break;case 5:if(null===r||void 0===r||null===(i=r.data)||void 0===i||!i.message){e.next=9;break}return e.next=8,n("submit",!0,!0);case 8:l("submit",null===r||void 0===r||null===(d=r.data)||void 0===d?void 0:d.message);case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}()};return(0,y.jsx)(ve.Z,{open:r,TransitionComponent:Ce,keepMounted:!0,onClose:n,sx:{"&>div:nth-of-type(3)":{justifyContent:"flex-end","&>div":{m:0,borderRadius:"0px",maxWidth:450,maxHeight:"100%"}}},children:r&&(0,y.jsx)(p.J9,{initialValues:(0,l.Z)({submit:null,display_name:"",key:"",group:"",order:1,details:""},t),enableReinitialize:!0,validationSchema:Ee,onSubmit:function(){var e=(0,ue.Z)(ce().mark((function e(r,n){var a,t,o,u,c;return ce().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.setErrors,n.setStatus,n.setSubmitting,t=n.setFieldTouched,o=n.setFieldError,u=(0,l.Z)({},r),console.log(r),c={setFieldTouched:t,setErrors:a,setFieldError:o};try{u.id?(u._method="put",i((0,ne.im)(u,s,d(c)))):u.id||i((0,ne.m$)(u,s,d(c)))}catch(m){i((0,ke.ss)({open:!0,message:"An Error Occured",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"error"},close:!1})),console.error(m)}case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),children:function(e){var r,a=e.errors,i=(e.setFieldValue,e.handleBlur),l=e.handleChange,s=e.handleSubmit,o=(e.isSubmitting,e.touched),d=e.values;return(0,y.jsx)("form",{noValidate:!0,onSubmit:s,id:"edit-admin",children:(0,y.jsxs)(ge._,{dateAdapter:fe.H,children:[(0,y.jsx)(pe.Z,{children:"Create Setting for Group - ".concat(t.group)}),(0,y.jsx)(he.Z,{children:(0,y.jsxs)(te.ZP,{container:!0,spacing:ye.dv,sx:{mt:.25},children:[(0,y.jsx)(te.ZP,{item:!0,xs:12,children:(0,y.jsx)(f.Z,{id:"adminSettings-group",fullWidth:!0,label:"Group",name:"group",disabled:!0,value:d.group,onBlur:i,onChange:l,error:Boolean(o.group&&a.group),helperText:o.group&&a.group})}),(0,y.jsx)(te.ZP,{item:!0,xs:12,children:(0,y.jsx)(f.Z,{id:"adminSettings-display-name",fullWidth:!0,label:"Display Name",name:"display_name",value:d.display_name,onBlur:i,onChange:l,error:Boolean(o.display_name&&a.display_name),helperText:o.display_name&&a.display_name})}),(0,y.jsx)(te.ZP,{item:!0,xs:12,children:(0,y.jsx)(f.Z,{id:"adminSettings-key",fullWidth:!0,label:"Key",name:"key",value:d.key,onBlur:i,onChange:l,error:Boolean(o.key&&a.key),helperText:o.key&&a.key,InputProps:{startAdornment:(0,y.jsx)(xe.Z,{position:"start",children:null===(r=d.group)||void 0===r?void 0:r.toLowerCase()})}})}),(0,y.jsx)(te.ZP,{item:!0,md:6,xs:12,children:(0,y.jsx)(f.Z,{id:"standard-select-type",name:"type",select:!0,label:"Select Type*",value:d.type,fullWidth:!0,onBlur:i,onChange:l,children:Se.map((function(e){return(0,y.jsx)(w.Z,{value:e.value,children:e.label},e.value)}))})}),(0,y.jsx)(te.ZP,{item:!0,md:6,xs:12,children:(0,y.jsx)(f.Z,{id:"standard-order",name:"order",type:"number",label:"Setting Order*",value:d.order,fullWidth:!0,inputProps:{min:0},onBlur:i,onChange:l})}),(0,y.jsx)(te.ZP,{item:!0,xs:12,children:(null===d||void 0===d?void 0:d.type)&&(0,y.jsx)(Pe,{setting:d})})]})}),(0,y.jsxs)(be.Z,{children:[a.submit&&(0,y.jsx)(u.Z,{sx:{ml:3,flex:1},children:(0,y.jsx)(k.Z,{error:!0,children:a.submit})}),(0,y.jsx)(Ze.Z,{children:(0,y.jsx)(m.Z,{variant:"text",color:"error",onClick:n,children:"Close"})})]}),(0,y.jsx)(u.Z,{sx:{mt:2}})]})})}})})},we=["children","value","index"],Ne=O;function Ve(e){var r={};return function e(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";x().forEach(n,(function(n,t){!x().isObject(n)||n instanceof File||Array.isArray(n)?Array.isArray(n)?r["".concat(a).concat(t)]=n.join("-"):r["".concat(a).concat(t)]=n:e(n,"".concat(a).concat(t,"-"))}))}(e),r}var Ae=function(e,r){var n=(0,l.Z)({},e),a=Object.keys(n),t=a.filter((function(e){return n[e]!==r[e]}));return a.forEach((function(e){t.includes(e)||delete n[e]})),n};function Fe(e){var r=e.children,n=e.value,a=e.index,t=(0,i.Z)(e,we);return(0,y.jsx)("div",(0,l.Z)((0,l.Z)({role:"tabpanel",hidden:n!==a,id:"simple-tabpanel-".concat(a),"aria-labelledby":"simple-tab-".concat(a)},t),{},{children:n===a&&(0,y.jsx)(u.Z,{sx:{p:0},children:r})}))}var Me=function(e){var r=e.settingGroups,n=e.setActiveTab,t=o.useState((0,a.Z)(r.keys())[0]),i=(0,s.Z)(t,2),u=i[0],m=i[1],v=(0,o.useMemo)((function(){return(0,a.Z)(r.keys())}),r),h=(0,p.u6)(),x=h.values;h.isValid,h.submitForm,(0,o.useMemo)((function(){return null!==r&&void 0!==r&&r.get("Site")?r.get("Site"):new Set}),[r]);return(0,o.useEffect)((function(){n(u)}),[u]),(0,y.jsx)(re.Z,{title:"",children:(0,y.jsxs)("div",{children:[(0,y.jsx)(d.Z,{value:u,indicatorColor:"primary",onChange:function(e,r){console.log(x),m(r)},sx:{mb:3,minHeight:"auto","& button":{minWidth:100},"& a":{minHeight:"auto",minWidth:10,py:1.5,px:1,mr:2.25,color:"grey.600"},"& a.Mui-selected":{color:"primary.main"}},"aria-label":"simple tabs example",variant:"scrollable",children:v.map((function(e,r){return(0,y.jsx)(c.Z,(0,l.Z)({component:g.rU,to:"#",value:e,label:e},function(e){return{key:e,id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}(e)))}))}),v.map((function(e,n){return(0,y.jsx)(Fe,{value:u,index:e,children:(0,y.jsx)(oe,{settings:null===r||void 0===r?void 0:r.get(e),tabName:e})},n)}))]})})};var qe=function(){var e=(0,Y.Z)(),r=ee(e),n=(0,o.useState)(0),a=(0,s.Z)(n,2),i=a[0],u=(a[1],(0,o.useState)("")),d=(0,s.Z)(u,2),c=d[0],h=d[1],b=(0,o.useState)({}),g=(0,s.Z)(b,2),f=g[0],Z=g[1],j=(0,o.useState)(new Map),k=(0,s.Z)(j,2),S=k[0],C=k[1],E=D[i],P=o.useState(!1),_=(0,s.Z)(P,2),w=_[0],N=_[1],V=(0,o.useState)(null),A=(0,s.Z)(V,2),F=A[0],M=A[1],q=(0,ae.I0)();(0,o.useEffect)((function(){q((0,ne.Gw)())}),[q]);var T=(0,ae.v9)((function(e){return e.adminSettings})).settings;(0,o.useEffect)((function(){if((null===T||void 0===T?void 0:T.length)>0){var e=function(e){var r={},n=new Map;return e.forEach((function(e){var a,i=n.get(e.group);i?i.add(e):n.set(e.group,new Set([e])),e.key=null===(a=e.key)||void 0===a?void 0:a.replace("-",".");var o=e.key.split("."),u=(0,s.Z)(o,2),d=u[0],c=u[1],m=e.value;"double_range"===e.type&&(m=e.value.split("-").map((function(e){return+e}))),r=(0,l.Z)((0,l.Z)({},r),{},(0,t.Z)({},d,(0,l.Z)((0,l.Z)({},r[d]),{},(0,t.Z)({},c,m))))})),console.log(n),console.log(r),{initialValues:r,settingGroups:n}}(JSON.parse(JSON.stringify(T)));Z(e.initialValues),C(e.settingGroups)}}),[T]);var O=(0,p.TA)({initialValues:f,enableReinitialize:!0,validationSchema:E,onSubmit:function(e,r){var n=Ve(e);console.log(n);var a=Ve(O.initialValues);console.log(a);var t=Ae(n,a);console.log(t),x().isEmpty(t)||q((0,ne.uW)(t,(function(){r.setTouched({}),r.setSubmitting(!1)}),(function(){r.setTouched({}),r.setSubmitting(!1)})))}}),W=O.isSubmitting;return O.touched,(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(_e,{open:w,editingAdminSetting:F,handleCloseDialog:function(e){N(!1)}}),(0,y.jsx)(p.Hy,{value:O,children:(0,y.jsxs)(p.l0,{id:Ne,children:[S.size>0&&(0,y.jsx)(Me,{settingGroups:S,setActiveTab:h}),(0,y.jsxs)("div",{style:r.buttons,children:[(0,y.jsx)("div",{style:r.wrapper,children:(0,y.jsx)(m.Z,{variant:"contained",color:"primary",sx:r.button,onClick:function(){return O.resetForm()},children:"Reset Changes"})}),(0,y.jsxs)("div",{style:r.wrapper,children:[(0,y.jsx)(m.Z,{disabled:W,onClick:function(){return function(e){var r;M({group:c,order:((null===(r=S.get(c))||void 0===r?void 0:r.size)||0)+1}),N(!0)}()},variant:"contained",color:"primary",sx:r.button,children:"Create New ".concat(c," Setting")}),W&&(0,y.jsx)(v.Z,{size:24,sx:r.buttonProgress})]}),(0,y.jsxs)("div",{style:r.wrapper,children:[(0,y.jsx)(m.Z,{disabled:W||!O.dirty,type:"submit",variant:"contained",color:"primary",sx:r.button,children:"Save Changes"}),W&&(0,y.jsx)(v.Z,{size:24,sx:r.buttonProgress})]})]})]})})]})}}}]);