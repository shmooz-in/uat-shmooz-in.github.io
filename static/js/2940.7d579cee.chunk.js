"use strict";(self.webpackChunkshmooz=self.webpackChunkshmooz||[]).push([[2940],{72940:function(e,n,t){t.r(n);var r=t(15861),a=t(29439),o=t(64687),s=t.n(o),c=t(7276),i=t(95173),l=t(45254),d=t(50169),u=t(81239),v=t(65173),g=t(20045),f=t(85535),h=t(6334),m=t(31342),p=t(53904),k=t(43767),x=t(15097),Z=t(56742),R=t(96156),A=t(93449),b=t(4471),E=t(83303),j=t(45263);n.default=function(){var e=(0,d.Z)(),n=(0,Z.I0)(),t=(0,i.UO)().code,o=(0,E.Z)().user,w=(0,i.s0)(),_=(0,l.lr)(),I=(0,a.Z)(_,1)[0],L=I.get("order_number"),P=I.get("ticket_ids"),y=(0,c.useState)("NOT_PROCESSED"),D=(0,a.Z)(y,2),M=D[0],S=D[1],C=(0,u.Z)(e.breakpoints.down("md")),K=function(){var e=(0,r.Z)(s().mark((function e(){var r,a,o,c,i,l,d,u,v,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=atob(t),o=new URLSearchParams(a).get("ticket_ids"),c=new URLSearchParams(a).get("order_number"),L&&(c=L),P&&(o=P),!((null===(i=null===(r=o)||void 0===r?void 0:r.split(","))||void 0===i?void 0:i.length)>0)){e.next=10;break}i.forEach((function(e){A.Z.postForm("/api/bookings/attendance",{order_number:c,ticket_id:e}).then((function(e){var t=e.data;S("MARKED"),n((0,b.ss)({open:!0,message:"Attendance Marked",variant:"alert",alert:{color:"success"},close:!1})),console.log("---- attendance response data",t)})).catch((function(e){var t,r;console.log(e);var a="Please try again later",o="error";"booking attendees already checked in"===(null===(t=e.data)||void 0===t||null===(r=t.message)||void 0===r?void 0:r.toLowerCase())?(S("ALREADY_MARKED"),a="Attendance Already Marked",o="warning"):S("ERROR"),n((0,b.ss)({open:!0,message:a,variant:"alert",alert:{color:o},close:!1}))}))})),e.next=26;break;case 10:return e.prev=10,e.next=13,A.Z.postForm("/api/bookings/attendance",{order_number:new URLSearchParams(a).get("order_number"),ticket_id:new URLSearchParams(a).get("ticket_id")});case 13:l=e.sent,console.log(l),S("MARKED"),n((0,b.ss)({open:!0,message:"Attendance Marked",variant:"alert",alert:{color:"success"},close:!1})),e.next=26;break;case 19:e.prev=19,e.t0=e.catch(10),console.log(e.t0),v="Please try again later",g="error","booking attendees already checked in"===(null===(d=e.t0.data)||void 0===d||null===(u=d.message)||void 0===u?void 0:u.toLowerCase())?(S("ALREADY_MARKED"),v="Attendance Already Marked",g="warning"):S("ERROR"),n((0,b.ss)({open:!0,message:v,variant:"alert",alert:{color:g},close:!1}));case 26:case"end":return e.stop()}}),e,null,[[10,19]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){null!==o&&void 0!==o&&o.id&&K()}),[t]);var U=(0,c.useState)(0),O=(0,a.Z)(U,2),z=O[0],N=O[1];return(0,c.useEffect)((function(){var e=setInterval((function(){z>0&&N(z-1),0===z&&clearInterval(e)}),1e3);return function(){clearInterval(e)}}),[z]),(0,c.useEffect)((function(){if("MARKED"===M||"INVALID"===M||"ALREADY_MARKED"===M){var e="INVALID"===M?R.GW:R.tu;N(5),e&&setTimeout((function(){w(e)}),5e3)}return function(){}}),[M]),(0,j.jsx)(p.Z,{children:(0,j.jsxs)(v.ZP,{container:!0,direction:"column",spacing:k.dv,alignItems:"center",justifyContent:"center",sx:{my:3},children:[(0,j.jsx)(v.ZP,{item:!0,xs:12,children:(0,j.jsxs)(g.Z,{alignItems:"center",spacing:2,children:[(0,j.jsx)(f.Z,{align:"center",variant:C?"h2":"h1",sx:{fontWeight:400,color:"grey.500"},children:k.I8[M]}),z>0&&(0,j.jsx)(f.Z,{variant:"caption",children:"Redirecting in (00:".concat(z<10?"0".concat(z):z,")")})]})}),(0,j.jsx)(v.ZP,{item:!0,xs:12,children:(0,j.jsx)(h.Z,{})}),(0,j.jsx)(v.ZP,{item:!0,xs:12,children:(0,j.jsx)(v.ZP,{direction:C?"column-reverse":"row",container:!0,spacing:3,alignItems:C?"":"center",justifyContent:"space-between",children:(0,j.jsx)(v.ZP,{item:!0,children:(0,j.jsx)(m.Z,{component:l.rU,to:R.E6,variant:"text",startIcon:(0,j.jsx)(x.Z,{}),children:"Continue Shmoozing"})})})})]})})}},15097:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(34921)),o=t(45263),s=(0,a.default)((0,o.jsx)("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace");n.Z=s}}]);