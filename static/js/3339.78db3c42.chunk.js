"use strict";(self.webpackChunkshmooz=self.webpackChunkshmooz||[]).push([[3339],{1759:function(e,n,i){var t=i(1413),o=i(45987),r=i(47313),s=i(19860),a=i(73428),l=i(54641),c=i(61113),d=i(19536),u=i(93405),x=i(46417),m=["children","content","contentClass","darkTitle","secondary","sx","contentSX","title"],v=r.forwardRef((function(e,n){var i=e.children,r=e.content,v=e.contentClass,h=e.darkTitle,Z=e.secondary,j=e.sx,p=void 0===j?{}:j,g=e.contentSX,b=void 0===g?{}:g,f=e.title,P=(0,o.Z)(e,m),y=(0,s.Z)();return(0,x.jsxs)(a.Z,(0,t.Z)((0,t.Z)({ref:n,sx:(0,t.Z)({border:"1px solid",borderColor:"dark"===y.palette.mode?y.palette.dark.light+15:y.palette.grey[200],":hover":{boxShadow:"dark"===y.palette.mode?"0 2px 14px 0 rgb(33 150 243 / 10%)":"0 2px 14px 0 rgb(32 40 45 / 8%)"}},p)},P),{},{children:[!h&&f&&(0,x.jsx)(l.Z,{sx:{p:2.5},title:(0,x.jsx)(c.Z,{variant:"h5",children:f}),action:Z}),h&&f&&(0,x.jsx)(l.Z,{sx:{p:2.5},title:(0,x.jsx)(c.Z,{variant:"h4",children:f}),action:Z}),f&&(0,x.jsx)(d.Z,{sx:{opacity:1,borderColor:"dark"===y.palette.mode?y.palette.dark.light+15:y.palette.grey[200]}}),r&&(0,x.jsx)(u.Z,{sx:(0,t.Z)({p:2.5},b),className:v||"",children:i}),!r&&i]}))}));v.defaultProps={content:!0},n.Z=v},89544:function(e,n,i){var t=i(9019),o=i(61113),r=i(19536),s=i(19860),a=i(88587),l=i.n(a),c=i(1759),d=i(12401),u=i(46417);n.Z=function(e){var n,i,a,x=e.checkout,m=(0,s.Z)(),v=(null===x||void 0===x?void 0:x.tickets.reduce((function(e,n){var i,t,o=0;return(null===n||void 0===n||null===(i=n.final_payable_price_breakup)||void 0===i||null===(t=i.tax_details)||void 0===t?void 0:t.length)>0&&(o=n.final_payable_price_breakup.tax_details.reduce((function(e,n){return e+ +n.tax_amount}),0)),o+e}),0))||0,h=(null===x||void 0===x?void 0:x.tickets.reduce((function(e,n){var i;return+((null===n||void 0===n||null===(i=n.final_payable_price_breakup)||void 0===i?void 0:i.total_tax_applied_on)||0)+e}),0))||0,Z=(null===x||void 0===x?void 0:x.tickets.reduce((function(e,n){var i=null===n||void 0===n?void 0:n.final_payable_price_breakup;return+i.booking_fees+ +i.CGST_on_booking_fees+ +i.SGST_on_booking_fees+e}),0))||0,j=+((null===x||void 0===x||null===(n=x.total_gross_payable_breakup)||void 0===n?void 0:n.platform_fees)||0);return(0,u.jsx)(c.Z,{sx:{mx:3,mb:3,bgcolor:"dark"===m.palette.mode?m.palette.dark.main:m.palette.primary.light},children:(0,u.jsx)(t.ZP,{container:!0,justifyContent:"flex-end",spacing:d.dv,children:(0,u.jsx)(t.ZP,{item:!0,sm:6,md:6,children:(0,u.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,u.jsx)(t.ZP,{item:!0,xs:12,children:(0,u.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"subtitle1",children:"Sub Total :"})}),(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"body2",children:l()(h).format({symbol:"\u20b9"})})}),(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"subtitle1",children:"Taxes (Tickets) :"})}),(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"body2",children:l()(v).format({symbol:"\u20b9"})})}),(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"subtitle1",children:"Booking Fees :"})}),(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"body2",children:Z<=0?"-":l()(Z).format({symbol:"\u20b9"})})}),(null===x||void 0===x?void 0:x.commission_paid_by_end_user)&&(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"subtitle1",children:"Organizer Commission:"})}),(null===x||void 0===x?void 0:x.commission_paid_by_end_user)&&(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"body2",children:j<=0?"-":l()(j).format({symbol:"\u20b9"})})}),(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"subtitle1",children:"Coupon Discount :"})}),(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",variant:"body2",children:(null===x||void 0===x||null===(i=x.discount_by_shmooz_breakup)||void 0===i?void 0:i.discount_amount)<=0?"-":l()(null===x||void 0===x||null===(a=x.discount_by_shmooz_breakup)||void 0===a?void 0:a.discount_amount).format({symbol:"\u20b9"})})})]})}),(0,u.jsx)(t.ZP,{item:!0,xs:12,children:(0,u.jsx)(r.Z,{sx:{bgcolor:"dark.main"}})}),(0,u.jsx)(t.ZP,{item:!0,xs:12,children:(0,u.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",color:"secondary",variant:"subtitle1",children:"Total :"})}),(0,u.jsx)(t.ZP,{item:!0,xs:6,children:(0,u.jsx)(o.Z,{align:"right",color:"secondary",variant:"subtitle1",children:l()(null===x||void 0===x?void 0:x.total_net_payable).format({symbol:"\u20b9"})})})]})})]})})})})}},63339:function(e,n,i){i.r(n),i.d(n,{default:function(){return K}});var t=i(15861),o=i(29439),r=i(1413),s=i(45987),a=i(64687),l=i.n(a),c=i(47313),d=i(58467),u=i(2135),x=i(19860),m=i(9506),v=i(82294),h=i(65280),Z=i(9019),j=i(61113),p=i(24193),g=i(43295),b=i.n(g),f=i(66182),P=i(1759),y=i(39236),_=i(48080),k=i(12401),C=i(89544),w=i(46417);function A(e,n,i,t,o){return{product:e,description:n,quantity:i,amount:t,total:o}}A("Logo Design","lorem ipsum dolor sit amat, connecter adieu siccing eliot","6","\u20b9200.00","\u20b91200.00"),A("Landing Page","lorem ipsum dolor sit amat, connecter adieu siccing eliot","7","\u20b9100.00","\u20b9700.00"),A("Admin Template","lorem ipsum dolor sit amat, connecter adieu siccing eliot","5","\u20b9150.00","\u20b9750.00");var S=function(){(0,x.Z)();var e=(0,c.useRef)(null);return(0,w.jsxs)(Z.ZP,{container:!0,justifyContent:"center",spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,md:10,lg:8,ref:e,children:(0,w.jsx)(P.Z,{darkTitle:!0,title:"Invoice #125863478945",secondary:(0,w.jsx)(_.Z,{}),children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"subtitle1",children:"Demo Company Inc."})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Address Line 1"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Address Line 2"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{component:u.rU,to:"#",variant:"body2",color:"primary",children:"demo@company.com"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"(+91) 9999 999 999"})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,sm:5,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"h5",children:"Customer :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"subtitle1",children:"John Doe"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Address Line 1"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Address Line 2"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"(+91) 9999 567 891"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{component:u.rU,to:"#",variant:"body2",color:"primary",children:"demo@company.com"})})]})})]})}),(0,w.jsx)(Z.ZP,{item:!0,sm:4,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"h5",children:"Order Details :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:4,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Date :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,children:(0,w.jsx)(j.Z,{variant:"body2",children:"November 14"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:4,sx:{my:.5},children:(0,w.jsx)(j.Z,{variant:"body2",children:"Status :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,sx:{my:.5},children:(0,w.jsx)(y.Z,{label:"Pending",variant:"outlined",size:"small",chipcolor:"warning"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:4,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Order Id :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,children:(0,w.jsx)(j.Z,{variant:"body2",component:u.rU,to:"#",children:"#146859"})})]})})]})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(C.Z,{})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"h6",children:"Terms and Condition :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"lorem ipsum dolor sit connecter adieu siccing eliot, sed do elusion tempore incident ut laborer et dolors magna aliquot."})})]})})]})})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,md:10,lg:8,children:(0,w.jsx)(Z.ZP,{container:!0,spacing:1,justifyContent:"center",sx:{maxWidth:850,mx:"auto",mt:0,mb:2.5,"& > .MuiCardContent-root":{py:{xs:3.75,md:5.5},px:{xs:2.5,md:5}}},children:(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(f.Z,{children:(0,w.jsx)(b(),{trigger:function(){return(0,w.jsx)(p.Z,{variant:"contained",children:"Print"})},content:function(){return e.current}})})})})})]})},D=i(33497),z=i(20563),B=i(54285),I=i(25442),L=i(35898),R=i(61689),T=i(19536),O=i(24631),F=i(6415),W=i(74652),E=i(5866),M=i(54918),U=i(85077),N=i(70816),Y=i.n(N),q=i(88587),$=i.n(q),G=function(e){var n=e.calculation,i=(0,x.Z)();return(0,w.jsx)(P.Z,{sx:{mx:3,mb:3,bgcolor:"dark"===i.palette.mode?i.palette.dark.main:i.palette.primary.light},children:(0,w.jsx)(Z.ZP,{container:!0,justifyContent:"flex-end",spacing:k.dv,children:(0,w.jsx)(Z.ZP,{item:!0,sm:6,md:6,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",variant:"subtitle1",children:"Amount :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",variant:"body2",children:$()(n.bookingAmountPaid).format({symbol:"\u20b9"})})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",variant:"subtitle1",children:"Deductions :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",variant:"body2",children:$()(n.netDeductions).format({symbol:"\u20b9"})})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(T.Z,{sx:{bgcolor:"dark.main"}})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",color:"secondary",variant:"subtitle1",children:"Earnings :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",color:"secondary",variant:"subtitle1",children:$()(null===n||void 0===n?void 0:n.netReceivable).format({symbol:"\u20b9"})})})]})})]})})})})},H=function(e){var n,i,s,a,d=e.venueBooking,u=e.refundData,x=e.fetchData,m=(0,I.I0)(),v=(0,B.Z)().user,h=(0,c.useState)(!1),g=(0,o.Z)(h,2),b=g[0],f=g[1],P=(0,c.useState)(!1),_=(0,o.Z)(P,2),C=_[0],A=_[1],S=(0,c.useState)(null),z=(0,o.Z)(S,2),N=z[0],q=z[1],$=(0,c.useState)(""),H=(0,o.Z)($,2),X=H[0],J=H[1],K=(0,c.useState)(""),Q=(0,o.Z)(K,2),V=Q[0],ee=Q[1],ne=(0,c.useState)(!1),ie=(0,o.Z)(ne,2),te=ie[0],oe=ie[1],re=(0,c.useState)(!1),se=(0,o.Z)(re,2),ae=se[0],le=se[1],ce=(0,c.useState)(""),de=(0,o.Z)(ce,2),ue=de[0],xe=de[1],me=(0,c.useRef)(),ve=function(){var e=(0,t.Z)(l().mark((function e(){var n,i,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={entity:"venue_booking",entity_id:d.booking_id,reason:N,date:Y()().format("YYYY-MM-DD")},e.prev=1,e.next=4,U.Z.postForm("/api/cancel",(0,r.Z)({},n));case 4:i=e.sent,console.log(i),A(!1),m((0,E.ss)({open:!0,message:"Your venue booking cancellation request is successful. In case of any refund eligibility, check booking details",variant:"alert",alert:{color:"success"},close:!1})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),m((0,E.ss)({open:!0,message:(null===e.t0||void 0===e.t0||null===(t=e.t0.data)||void 0===t?void 0:t.message)||"An error occured",variant:"alert",alert:{color:"error"},close:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=function(e){var n,i;"venue_booking_payment_interaction"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(m((0,E.ss)({open:!0,message:"Payment was successful",variant:"alert",alert:{color:"success"},close:!1})),null===(i=window.paymentWindow)||void 0===i||i.close());console.log(e.data)};return window.addEventListener("message",e,!1),function(){clearInterval(me.current),window.removeEventListener("message",e)}}),[]);var he=(0,c.useMemo)((function(){var e="";if("rejected"===(null===d||void 0===d?void 0:d.status))e=d.reject_reason;else if("cancelled"===(null===d||void 0===d?void 0:d.status)){var n;e=null===(n=d.cancel_log)||void 0===n?void 0:n.reason}return e}),[d]);return(0,w.jsxs)(D.Z,{title:null===d||void 0===d||null===(n=d.venue)||void 0===n?void 0:n.title,secondary:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,item:!0,xs:12,justifyContent:"flex-end",children:["booked"===(null===d||void 0===d?void 0:d.status)&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(p.Z,{variant:"outlined",label:"Cancel",onClick:function(){A(!0)},color:"error",children:"Cancel Booking"})}),("pending"===(null===d||void 0===d?void 0:d.status)||"accepted_with_booking_amount"===(null===d||void 0===d?void 0:d.status))&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(p.Z,{variant:"outlined",label:"Reject",onClick:function(){le(!0)},color:"error",children:"Reject"})}),"pending"===(null===d||void 0===d?void 0:d.status)&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(p.Z,{variant:"outlined",label:"Cancel",onClick:function(){J(""),ee(""),oe(!0)},color:"success",children:"Approve"})}),"accepted_with_booking_amount"===(null===d||void 0===d?void 0:d.status)&&(null===d||void 0===d?void 0:d.venue_owner_id)!=(null===v||void 0===v?void 0:v.id)&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(p.Z,{variant:"outlined",label:"Cancel",onClick:function(){f(!0)},color:"success",children:"Process Payment"})})]}),children:[(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(L.Z,{spacing:1,children:[(0,w.jsx)(j.Z,{children:"Booking Status: "}),(0,w.jsx)(R.Z,{title:he,placement:"top-end",children:(0,w.jsx)("span",{children:(0,w.jsx)(y.Z,{label:null===(i=k.au[null===d||void 0===d?void 0:d.status])||void 0===i?void 0:i.title,size:"small",chipcolor:null===(s=k.au[null===d||void 0===d?void 0:d.status])||void 0===s?void 0:s.color,variant:"outlined",sx:{maxWidth:"fit-content"}})})}),(0,w.jsx)(j.Z,{children:null===(a=k.au[null===d||void 0===d?void 0:d.status])||void 0===a?void 0:a.description})]})}),("booked"===(null===d||void 0===d?void 0:d.status)||"accepted"===(null===d||void 0===d?void 0:d.status)||"cancelled"===(null===d||void 0===d?void 0:d.status))&&(0,w.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(L.Z,{spacing:1,children:[(0,w.jsx)(j.Z,{children:"Advance Amount Paid: "}),(0,w.jsx)(y.Z,{label:(0,M.$)(null===d||void 0===d?void 0:d.advance_amount),size:"small",chipcolor:"success",variant:"outlined",sx:{maxWidth:"fit-content"}})]})}),u&&(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(L.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,w.jsx)(j.Z,{children:"Refund Amount: "}),(0,w.jsx)(y.Z,{label:"".concat(u.status," : ").concat((0,M.$)(u.amount)),size:"small",chipcolor:"completed"===u.status?"success":"orange",variant:"outlined",sx:{maxWidth:"fit-content"}})]})})]}),v.id===(null===d||void 0===d?void 0:d.venue_owner_id)&&!(null!==d&&void 0!==d&&d.is_cancel)&&"booked"===(null===d||void 0===d?void 0:d.status)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(T.Z,{sx:{my:1}}),(0,w.jsxs)(L.Z,{spacing:1,children:[(0,w.jsx)(j.Z,{children:"Earnings: "}),(0,w.jsx)(G,{calculation:{bookingAmountPaid:100,taxOnBookingAmount:0,minusTaxAmount:100,totalCommission:8.26,totalPgFees:1.18,netDeductions:9.44,pgFeesBreakup:{fees:1,tax:.18,taxPercentage:18},commissionBreakup:{commissionOn:100,fees:7,tax:1.26,taxPercentage:18},netReceivable:90.56}})]})]}),(0,w.jsx)(F.Z,{open:b,setOpen:f,confirmLabel:"Continue",onConfirm:function(){var e={id:d.booking_id};m((0,W.HF)(e,(function(e){var n=null===e||void 0===e?void 0:e.payment_link;if(n){var i=window.open(n,"popUpWindow","height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes");window.paymentWindow=i,me.current=setInterval((function(){i.closed&&(clearInterval(me.current),x(d.booking_id))}),1e3),f(!1)}else m((0,E.ss)({open:!0,message:"Please try again later",variant:"alert",alert:{color:"error"},close:!1}))}),(function(e){m((0,E.ss)({open:!0,message:(null===e||void 0===e?void 0:e.message)||"An error occured",variant:"alert",alert:{color:"error"},close:!1}))})))},onCancel:function(){return f(!1)},invertButtons:!0,title:(0,w.jsxs)("span",{children:["Proceed to pay the booking amount ",(0,w.jsx)("b",{children:(0,M.$)(null===d||void 0===d?void 0:d.advance_amount)}),"?"]})}),(0,w.jsx)(F.Z,{open:C,setOpen:A,onConfirm:ve,onCancel:function(){return A(!1)},confirmLabel:"Cancel Booking",cancelLabel:"Close",allowEscape:!1,allowClickAway:!1,confirmButtonProps:{disabled:""==(null===N||void 0===N?void 0:N.trim())},content:(0,w.jsxs)(L.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(O.Z,{size:"small",label:"Cancel Reason",value:N,onChange:function(e){return q(e.target.value)}}),(!N||""==(null===N||void 0===N?void 0:N.trim()))&&(0,w.jsx)(j.Z,{color:"error",variant:"caption",children:"Please fill cancel reason"})]})}),(0,w.jsx)(F.Z,{open:te,setOpen:oe,confirmLabel:"Approve",onConfirm:function(){var e={id:d.booking_id,advance_amount:X>0?X:void 0,final_amount:V||0,status:X>0?"accepted_with_booking_amount":"accepted",_method:"put"};m((0,W.lW)(e,(function(){oe(!1)})))},onCancel:function(){return oe(!1)},invertButtons:!0,content:(0,w.jsxs)(L.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(O.Z,{type:"number",size:"small",label:"Advance Amount",value:X,onChange:function(e){return J(e.target.value)}}),(0,w.jsx)(O.Z,{type:"number",size:"small",label:"Final Amount(optional)",value:V,onChange:function(e){return ee(e.target.value)}}),(Number.isNaN(parseFloat(X))||parseFloat(X)<0)&&(0,w.jsx)(j.Z,{color:"error",variant:"caption",children:"Advance Amount should be greater than or equal to 0"})]})}),(0,w.jsx)(F.Z,{open:ae,setOpen:le,onConfirm:function(){var e={id:d.booking_id,reject_reason:ue,status:"rejected",_method:"put"};m((0,W.lW)(e,(function(){le(!1)})))},onCancel:function(){return le(!1)},confirmLabel:"Reject",content:(0,w.jsxs)(L.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(O.Z,{size:"small",label:"Reject Reason",value:ue,onChange:function(e){return xe(e.target.value)}}),(!ue||""==(null===ue||void 0===ue?void 0:ue.trim()))&&(0,w.jsx)(j.Z,{color:"error",variant:"caption",children:"Please fill reject reason"})]})})]})},X=["children","value","index"];function J(e){var n=e.children,i=e.value,t=e.index,o=(0,s.Z)(e,X);return(0,w.jsx)("div",(0,r.Z)((0,r.Z)({role:"tabpanel",hidden:i!==t,id:"simple-tabpanel-".concat(t),"aria-labelledby":"simple-tab-".concat(t)},o),{},{children:i===t&&(0,w.jsx)(m.Z,{sx:{p:0},children:n})}))}var K=function(e){var n,i,s=e.parentBookingId,a=(0,x.Z)(),m=((0,I.I0)(),(0,c.useState)(0)),Z=(0,o.Z)(m,2),j=Z[0],p=Z[1],g=(0,c.useState)(null),b=(0,o.Z)(g,2),f=b[0],P=b[1],y=(0,c.useState)(null),_=(0,o.Z)(y,2),k=_[0],C=_[1],A=(0,B.Z)(),L=(A.isLoggedIn,A.user,(0,d.UO)().bookingId),R=(0,c.useMemo)((function(){return s||L}),[s,L]),T=function(){var e=(0,t.Z)(l().mark((function e(n){var i,t,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.Z.get("/api/venue-bookings/".concat(n));case 3:t=e.sent,(o=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data).is_cancel&&(o.status="cancelled"),P(o),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),O=function(){var e=(0,t.Z)(l().mark((function e(n){var i,t,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.Z.get("/api/refund/".concat(n));case 3:t=e.sent,o=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data,C(o),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){R&&T(R)}),[R,j]),(0,c.useEffect)((function(){var e,n=null===f||void 0===f||null===(e=f.cancel_log)||void 0===e?void 0:e.refund_id;n&&O(n)}),[null===f||void 0===f||null===(n=f.cancel_log)||void 0===n?void 0:n.refund_id]),(0,w.jsxs)(D.Z,{children:[(0,w.jsx)(v.Z,{value:j,indicatorColor:"primary",textColor:"primary",onChange:function(e,n){p(n)},variant:"scrollable","aria-label":"simple tabs example",sx:{"& a":{minHeight:"auto",minWidth:10,px:1,py:1.5,mr:2.25,color:a.palette.grey[600],display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},"& a.Mui-selected":{color:a.palette.primary.main},"& a > svg":{marginBottom:"0px !important",marginRight:1.25},mb:3},children:(0,w.jsx)(h.Z,(0,r.Z)({icon:(0,w.jsx)(z.Z,{}),component:u.rU,to:"#",label:"Details"},(i=0,{id:"simple-tab-".concat(i),"aria-controls":"simple-tabpanel-".concat(i)})))}),(0,w.jsx)(J,{value:j,index:0,children:(0,w.jsx)(H,{venueBooking:f,refundData:k,fetchData:T})}),(0,w.jsx)(J,{value:j,index:1,children:(0,w.jsx)(S,{bookingForOrder:f})})]})}}}]);