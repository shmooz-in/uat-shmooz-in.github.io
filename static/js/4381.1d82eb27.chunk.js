"use strict";(self.webpackChunkshmooz=self.webpackChunkshmooz||[]).push([[4381],{24381:function(e,n,r){r.r(n),r.d(n,{default:function(){return pe}});var t=r(15861),i=r(29439),o=r(1413),l=r(64687),s=r.n(l),c=r(47313),a=r(19860),u=r(23477),d=r(24076),h=r(67478),x=r(44758),p=r(82558),f=r(9506),m=r(61113),Z=r(9289),v=r(61689),g=r(47131),j=r(93405),b=r(9019),S=r(24631),C=r(41727),k=r(42420),y=r(51629),w=r(66835),z=r(57861),P=r(90891),R=r(70024),E=r(79601),O=r(51405),T=r(62323),A=r(50282),F=r(50301),I=r(94469),D=r(33604),B=r(96467),M=r(48623),q=r(83929),L=r(4117),W=r(24193),_=r(12401),V=r(66182),H=r(3463),U=r(79429),G=r(27146),J=r(85554),N=r(5866),K=r(46417),Q=(0,c.forwardRef)((function(e,n){return(0,K.jsx)(F.Z,(0,o.Z)({direction:"left",ref:n},e))})),X=function(e){var n,r=e.open,l=e.handleCloseDialog,a=e.editingRole,u=(0,J.I0)(),d=(0,J.v9)((function(e){return e.role.permissions})),h=(0,c.useState)(0),x=(0,i.Z)(h,2),p=x[0],m=x[1],Z=(0,c.useRef)((function(){}));(0,c.useEffect)((function(){Z.current=function(){if(p>100)m(0);else{var e=10*Math.random();m(p+e)}}})),(0,c.useEffect)((function(){var e=setInterval((function(){Z.current()}),500);return function(){clearInterval(e)}}),[]);var v=function(e){l(),u((0,N.ss)({open:!0,message:"Role Updated successfully",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"},close:!1}))},g=function(){var e=(0,t.Z)(s().mark((function e(n,r,t,i,o){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(r,!0,!0);case 2:o(r,n[r].join(", "));case 3:case"end":return e.stop()}}),e)})));return function(n,r,t,i,o){return e.apply(this,arguments)}}(),j=function(e){var n=e.setFieldTouched,r=void 0===n?null:n,t=e.setErrors,i=void 0===t?null:t,o=e.setFieldError,l=void 0===o?null:o;return function(e){var n;if(null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.errors){var t,o=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.errors;Object.keys(o).forEach((function(e){g(o,e,r,i,l)}))}}};return(0,K.jsx)(I.Z,{open:r,TransitionComponent:Q,keepMounted:!0,onClose:l,sx:{"&>div:nth-of-type(3)":{justifyContent:"flex-end","&>div":{m:0,borderRadius:"0px",maxWidth:450,maxHeight:"100%"}}},children:r&&(0,K.jsx)(U.J9,{initialValues:(0,o.Z)((0,o.Z)({name:"",status:!0},a),{},{permission:(null===a||void 0===a||null===(n=a.permissions)||void 0===n?void 0:n.map((function(e){return e.id})))||[],permissions:null}),enableReinitialize:!0,validationSchema:H.Ry().shape({name:H.Z_().required("Title is required")}),onSubmit:function(){var e=(0,t.Z)(s().mark((function e(n,r){var t,i,l,c,a,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=r.setErrors,r.setStatus,r.setSubmitting,l=r.setFieldTouched,c=r.setFieldError,a=(0,o.Z)((0,o.Z)({},n),{},{permission:null===(t=n.permission)||void 0===t?void 0:t.join(",")}),console.log(n),d={setFieldTouched:l,setErrors:i,setFieldError:c};try{a.id?(a._method="put",u((0,G.ul)(a,v,j(d)))):a.id||u((0,G._d)(a,v,j(d)))}catch(s){u((0,N.ss)({open:!0,message:"An Error Occured",anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"error"},close:!1})),console.error(s)}case 5:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),children:function(e){var n=e.errors,r=e.setFieldValue,t=e.handleBlur,i=e.handleChange,s=e.handleSubmit,c=e.isSubmitting,u=e.touched,h=e.values;return(0,K.jsxs)("form",{noValidate:!0,onSubmit:s,children:[(0,K.jsx)(D.Z,{children:"".concat(h.id?"Edit":"Add"," Role")}),(0,K.jsx)(B.Z,{children:(0,K.jsxs)(b.ZP,{container:!0,spacing:_.dv,sx:{mt:.25},children:[(0,K.jsx)(b.ZP,{item:!0,xs:12,children:(0,K.jsx)(S.Z,{id:"role-name",fullWidth:!0,label:"Enter Role Title*",name:"name",disabled:null!=a.id,value:h.name,onBlur:t,onChange:i,error:Boolean(u.name&&n.name),helperText:u.name&&n.name})}),(0,K.jsx)(b.ZP,{item:!0,xs:12,children:(0,K.jsx)(M.Z,{multiple:!0,disableCloseOnSelect:!0,options:d.map((function(e){return e.id})),getOptionLabel:function(e){var n;return null===d||void 0===d||null===(n=d.find((function(n){return n.id===e})))||void 0===n?void 0:n.name},onChange:function(e,n){r("permission",n||[])},value:h.permission,renderInput:function(e){return(0,K.jsx)(S.Z,(0,o.Z)((0,o.Z)({},e),{},{label:"Permission *",placeholder:"Select Permission",error:u.permission&&Boolean(n.permission),helperText:u.permission&&n.permission}))}})}),(0,K.jsx)(b.ZP,{item:!0,md:6,xs:12,children:(0,K.jsx)(q.Z,{control:(0,K.jsx)(R.Z,{checked:h.status||!1,name:"status",onChange:function(e){return r("status",e.target.checked)}}),label:"Active"})})]})}),(0,K.jsxs)(L.Z,{children:[(0,K.jsx)(V.Z,{children:(0,K.jsx)(W.Z,{color:"secondary",disabled:c,fullWidth:!0,size:"large",type:"submit",variant:"contained",children:"".concat(h.id?"Update":"Create")})}),(0,K.jsx)(V.Z,{children:(0,K.jsx)(W.Z,{variant:"text",color:"error",onClick:l,children:"Close"})})]}),(0,K.jsx)(f.Z,{sx:{mt:2}})]})}})})},Y=r(33497),$=r(25442),ee=r(51997),ne=r(44289),re=r(94788),te=r(49854),ie=r(57983),oe=r(83033),le=r(38398),se=r(11146);function ce(e,n,r){return n[r]<e[r]?-1:n[r]>e[r]?1:0}var ae=function(e,n){return"desc"===e?function(e,r){return ce(e,r,n)}:function(e,r){return-ce(e,r,n)}};function ue(e,n){var r=e.map((function(e,n){return[e,n]}));return r.sort((function(e,r){var t=n(e[0],r[0]);return 0!==t?t:e[1]-r[1]})),r.map((function(e){return e[0]}))}var de=[{id:"id",numeric:!0,label:"ID",align:"center"},{id:"name",numeric:!1,label:"Role Title",align:"left"},{id:"status",numeric:!1,label:"Status",align:"center"}];function he(e){var n=e.onSelectAllClick,r=e.order,t=e.orderBy,i=e.numSelected,o=e.rowCount,l=e.onRequestSort,s=e.theme,c=e.selected;return(0,K.jsx)(u.Z,{children:(0,K.jsxs)(d.Z,{children:[(0,K.jsx)(h.Z,{padding:"checkbox",sx:{pl:3},children:(0,K.jsx)(x.Z,{color:"primary",indeterminate:i>0&&i<o,checked:o>0&&i===o,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),i>0&&(0,K.jsx)(h.Z,{padding:"none",colSpan:7,children:(0,K.jsx)(xe,{numSelected:c.length})}),i<=0&&de.map((function(e){return(0,K.jsx)(h.Z,{align:e.align,padding:e.disablePadding?"none":"normal",sortDirection:t===e.id&&r,children:(0,K.jsxs)(p.Z,{active:t===e.id,direction:t===e.id?r:"asc",onClick:(n=e.id,function(e){l(e,n)}),children:[e.label,t===(null===e||void 0===e?void 0:e.id)?(0,K.jsx)(f.Z,{component:"span",sx:A.Z,children:"desc"===r?"sorted descending":"sorted ascending"}):null]})},e.id);var n})),i<=0&&(0,K.jsx)(h.Z,{sortDirection:!1,align:"center",sx:{pr:3},children:(0,K.jsx)(m.Z,{variant:"subtitle1",sx:{color:"dark"===s.palette.mode?"grey.600":"grey.900"},children:"Action"})})]})})}var xe=function(e){var n=e.numSelected;return(0,K.jsxs)(Z.Z,{sx:(0,o.Z)({p:0,pl:1,pr:1},n>0&&{color:function(e){return e.palette.secondary.main}}),children:[n>0?(0,K.jsxs)(m.Z,{color:"inherit",variant:"h4",children:[n," Selected"]}):(0,K.jsx)(m.Z,{variant:"h6",id:"tableTitle",children:"Nutrition"}),(0,K.jsx)(f.Z,{sx:{flexGrow:1}}),n>0&&(0,K.jsx)(v.Z,{title:"Delete",children:(0,K.jsx)(g.Z,{size:"large",children:(0,K.jsx)(ee.Z,{fontSize:"small"})})})]})},pe=function(){var e=(0,a.Z)(),n=(0,$.I0)(),r=c.useState(null),t=(0,i.Z)(r,2),o=t[0],l=t[1],s=c.useState(!1),u=(0,i.Z)(s,2),p=u[0],f=u[1],Z=function(e){l(e),f(!0)},A=c.useState("asc"),F=(0,i.Z)(A,2),I=F[0],D=F[1],B=c.useState("calories"),M=(0,i.Z)(B,2),q=M[0],L=M[1],W=c.useState([]),_=(0,i.Z)(W,2),V=_[0],H=_[1],U=c.useState(0),J=(0,i.Z)(U,2),Q=J[0],ee=J[1],ce=c.useState(5),de=(0,i.Z)(ce,2),xe=de[0],pe=de[1],fe=c.useState(""),me=(0,i.Z)(fe,2),Ze=me[0],ve=me[1],ge=c.useState([]),je=(0,i.Z)(ge,2),be=je[0],Se=je[1],Ce=(0,$.v9)((function(e){return e.role})).roles,ke=c.useState(!1),ye=(0,i.Z)(ke,2),we=ye[0],ze=ye[1];c.useEffect((function(){n((0,G.F3)()),n((0,G.Zu)())}),[n]),c.useEffect((function(){Se(Ce)}),[Ce]);var Pe=c.useState(null),Re=(0,i.Z)(Pe,2),Ee=Re[0],Oe=Re[1],Te=function(e){Oe(null===e||void 0===e?void 0:e.currentTarget)},Ae=function(){Oe(null)},Fe=function(){n((0,N.ss)({open:!0,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"success"},message:"Role Deleted"})),n((0,G.F3)())},Ie=function(){n((0,N.ss)({open:!0,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"alert",alert:{color:"error"},message:"An Error Occured"}))},De=Q>0?Math.max(0,(1+Q)*xe-be.length):0;return(0,K.jsxs)(Y.Z,{title:"Role List",content:!1,children:[(0,K.jsx)(j.Z,{children:(0,K.jsxs)(b.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",spacing:2,children:[(0,K.jsx)(b.ZP,{item:!0,xs:12,sm:6,children:(0,K.jsx)(S.Z,{InputProps:{startAdornment:(0,K.jsx)(C.Z,{position:"start",children:(0,K.jsx)(ie.Z,{fontSize:"small"})})},onChange:function(e){var n=null===e||void 0===e?void 0:e.target.value;if(ve(n||""),n){var r=be.filter((function(e){var r=!0,t=!1;return["name","category","price","qty","id"].forEach((function(r){e[r].toString().toLowerCase().includes(n.toString().toLowerCase())&&(t=!0)})),t||(r=!1),r}));Se(r)}else Se(Ce)},placeholder:"Search Role",value:Ze,size:"small"})}),(0,K.jsxs)(b.ZP,{item:!0,xs:12,sm:6,sx:{textAlign:"right"},children:[(0,K.jsx)(v.Z,{title:"Copy",children:(0,K.jsx)(g.Z,{size:"large",children:(0,K.jsx)(te.Z,{})})}),(0,K.jsx)(v.Z,{title:"Print",children:(0,K.jsx)(g.Z,{size:"large",children:(0,K.jsx)(re.Z,{})})}),(0,K.jsx)(v.Z,{title:"Filter",children:(0,K.jsx)(g.Z,{size:"large",children:(0,K.jsx)(ne.Z,{})})}),(0,K.jsx)(v.Z,{title:"Add Role",children:(0,K.jsx)(k.Z,{color:"primary",size:"small",onClick:Z,sx:{boxShadow:"none",ml:1,width:32,height:32,minHeight:32},children:(0,K.jsx)(oe.Z,{fontSize:"small"})})}),(0,K.jsx)(X,{open:p,editingRole:o,handleCloseDialog:function(){f(!1),l(null)}})]})]})}),(0,K.jsx)(y.Z,{children:(0,K.jsxs)(w.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,K.jsx)(he,{numSelected:V.length,order:I,orderBy:q,onSelectAllClick:function(e){if(e.target.checked)if(V.length>0)H([]);else{var n=be.map((function(e){return e.id}));H(n)}else H([])},onRequestSort:function(e,n){D(q===n&&"asc"===I?"desc":"asc"),L(n)},rowCount:be.length,theme:e,selected:V}),(0,K.jsxs)(z.Z,{children:[ue(be,ae(I,q)).slice(Q*xe,Q*xe+xe).map((function(r,t){if("number"===typeof r)return null;var i,o=(i=r.id,-1!==V.indexOf(i)),s="enhanced-table-checkbox-".concat(t);return(0,K.jsxs)(d.Z,{hover:!0,role:"checkbox","aria-checked":o,tabIndex:-1,selected:o,children:[(0,K.jsx)(h.Z,{padding:"checkbox",sx:{pl:3},onClick:function(e){return function(e,n){var r=V.indexOf(n),t=[];-1===r?t=t.concat(V,n):0===r?t=t.concat(V.slice(1)):r===V.length-1?t=t.concat(V.slice(0,-1)):r>0&&(t=t.concat(V.slice(0,r),V.slice(r+1))),H(t)}(0,r.id)},children:(0,K.jsx)(x.Z,{color:"primary",checked:o,inputProps:{"aria-labelledby":s}})}),(0,K.jsx)(h.Z,{align:"center",component:"th",id:s,scope:"row",sx:{cursor:"pointer"},children:(0,K.jsxs)(m.Z,{variant:"subtitle1",sx:{color:"dark"===e.palette.mode?"grey.600":"grey.900"},children:["#",r.id," "]})}),(0,K.jsx)(h.Z,{component:"th",id:s,scope:"row",sx:{cursor:"pointer"},onClick:function(e){return Z(r)},children:(0,K.jsx)(P.Z,{underline:"hover",color:"default",sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"primary.main"},cursor:"pointer"},children:r.name})}),(0,K.jsx)(h.Z,{align:"center",children:(0,K.jsx)(R.Z,{checked:r.status,color:"".concat(r.status?"success":"error"),inputProps:{"aria-label":"controlled"},onChange:function(e,t){var i={id:r.id,status:e.target.checked,_method:"put"};n((0,G.ul)(i,(function(){}),(function(){})))}})}),(0,K.jsxs)(h.Z,{align:"center",sx:{pr:3},children:[(0,K.jsx)(g.Z,{onClick:Te,size:"large","aria-label":"more options",children:(0,K.jsx)(le.Z,{fontSize:"small","aria-controls":"menu-popular-card-1","aria-haspopup":"true",sx:{color:"grey.500"}})}),(0,K.jsxs)(E.Z,{id:"menu-popular-card-1",anchorEl:Ee,keepMounted:!0,open:Boolean(Ee),onClose:Ae,variant:"selectedMenu",anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},sx:{"& .MuiMenu-paper":{boxShadow:e.customShadows.z1}},children:[(0,K.jsx)(O.Z,{onClick:function(){return function(e){Z(e),Ae()}(r)},children:"Edit"}),(0,K.jsx)(O.Z,{onClick:function(){return function(e){Ae(),l(e),ze(!0)}(r)},children:"Delete"})]})]})]},t)})),De>0&&(0,K.jsx)(d.Z,{style:{height:53*De},children:(0,K.jsx)(h.Z,{colSpan:6})})]})]})}),(0,K.jsx)(T.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:be.length,rowsPerPage:xe,page:Q,onPageChange:function(e,n){ee(n)},onRowsPerPageChange:function(e){pe(parseInt(null===e||void 0===e?void 0:e.target.value,10)),ee(0)}}),(0,K.jsx)(se.Z,{open:we,setOpen:ze,item:o,onConfirm:function(){ze(!1),n((0,G.Rd)(o,Fe,Ie))},onCancel:function(){return ze(!1)}})]})}}}]);