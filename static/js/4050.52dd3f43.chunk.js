"use strict";(self.webpackChunkshmooz=self.webpackChunkshmooz||[]).push([[4050],{1759:function(e,n,i){var t=i(1413),r=i(45987),o=i(47313),a=i(19860),s=i(73428),l=i(54641),c=i(61113),d=i(19536),u=i(93405),x=i(46417),v=["children","content","contentClass","darkTitle","secondary","sx","contentSX","title"],m=o.forwardRef((function(e,n){var i=e.children,o=e.content,m=e.contentClass,h=e.darkTitle,Z=e.secondary,p=e.sx,j=void 0===p?{}:p,g=e.contentSX,b=void 0===g?{}:g,f=e.title,P=(0,r.Z)(e,v),y=(0,a.Z)();return(0,x.jsxs)(s.Z,(0,t.Z)((0,t.Z)({ref:n,sx:(0,t.Z)({border:"1px solid",borderColor:"dark"===y.palette.mode?y.palette.dark.light+15:y.palette.grey[200],":hover":{boxShadow:"dark"===y.palette.mode?"0 2px 14px 0 rgb(33 150 243 / 10%)":"0 2px 14px 0 rgb(32 40 45 / 8%)"}},j)},P),{},{children:[!h&&f&&(0,x.jsx)(l.Z,{sx:{p:2.5},title:(0,x.jsx)(c.Z,{variant:"h5",children:f}),action:Z}),h&&f&&(0,x.jsx)(l.Z,{sx:{p:2.5},title:(0,x.jsx)(c.Z,{variant:"h4",children:f}),action:Z}),f&&(0,x.jsx)(d.Z,{sx:{opacity:1,borderColor:"dark"===y.palette.mode?y.palette.dark.light+15:y.palette.grey[200]}}),o&&(0,x.jsx)(u.Z,{sx:(0,t.Z)({p:2.5},b),className:m||"",children:i}),!o&&i]}))}));m.defaultProps={content:!0},n.Z=m},89544:function(e,n,i){var t=i(9019),r=i(61113),o=i(19536),a=i(19860),s=i(88587),l=i.n(s),c=i(1759),d=i(46417);n.Z=function(e){var n,i,s,u=e.checkout,x=(0,a.Z)(),v=(null===u||void 0===u?void 0:u.tickets.reduce((function(e,n){var i,t,r=0;return(null===n||void 0===n||null===(i=n.final_payable_price_breakup)||void 0===i||null===(t=i.tax_details)||void 0===t?void 0:t.length)>0&&(r=n.final_payable_price_breakup.tax_details.reduce((function(e,n){return e+ +n.tax_amount}),0)),r+e}),0))||0,m=(null===u||void 0===u?void 0:u.tickets.reduce((function(e,n){var i;return+((null===n||void 0===n||null===(i=n.final_payable_price_breakup)||void 0===i?void 0:i.total_tax_applied_on)||0)+e}),0))||0,h=(null===u||void 0===u?void 0:u.tickets.reduce((function(e,n){var i=null===n||void 0===n?void 0:n.final_payable_price_breakup;return+i.booking_fees+ +i.CGST_on_booking_fees+ +i.SGST_on_booking_fees+e}),0))||0,Z=+((null===u||void 0===u||null===(n=u.total_gross_payable_breakup)||void 0===n?void 0:n.platform_fees)||0);return(0,d.jsx)(c.Z,{content:!1,sx:{mx:2,mb:1,p:2,bgcolor:"dark"===x.palette.mode?x.palette.dark.main:x.palette.primary.light},children:(0,d.jsx)(t.ZP,{container:!0,justifyContent:"flex-end",spacing:2,children:(0,d.jsx)(t.ZP,{item:!0,sm:6,md:6,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Sub Total :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:l()(m).format({symbol:"\u20b9"})})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Taxes (Tickets) :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:l()(v).format({symbol:"\u20b9"})})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Booking Fees :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:h<=0?"-":l()(h).format({symbol:"\u20b9"})})}),(null===u||void 0===u?void 0:u.commission_paid_by_end_user)&&(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Organizer Commission:"})}),(null===u||void 0===u?void 0:u.commission_paid_by_end_user)&&(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:Z<=0?"-":l()(Z).format({symbol:"\u20b9"})})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Coupon Discount :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:(null===u||void 0===u||null===(i=u.discount_by_shmooz_breakup)||void 0===i?void 0:i.discount_amount)<=0?"-":l()(null===u||void 0===u||null===(s=u.discount_by_shmooz_breakup)||void 0===s?void 0:s.discount_amount).format({symbol:"\u20b9"})})})]})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(o.Z,{sx:{borderColor:"secondary.light"}})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",color:"secondary",variant:"subtitle1",children:"Total :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",color:"secondary",variant:"subtitle1",children:l()(null===u||void 0===u?void 0:u.total_net_payable).format({symbol:"\u20b9"})})})]})})]})})})})}},44050:function(e,n,i){i.r(n),i.d(n,{default:function(){return X}});var t=i(15861),r=i(29439),o=i(1413),a=i(45987),s=i(64687),l=i.n(s),c=i(47313),d=i(58467),u=i(2135),x=i(19860),v=i(9506),m=i(82294),h=i(65280),Z=i(9019),p=i(61113),j=i(24193),g=i(43295),b=i.n(g),f=i(66182),P=i(1759),y=i(39236),_=i(48080),k=i(12401),C=i(89544),w=i(46417),A=function(){var e=(0,c.useRef)(null);return(0,w.jsxs)(Z.ZP,{container:!0,justifyContent:"center",spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,md:10,lg:8,ref:e,children:(0,w.jsx)(P.Z,{darkTitle:!0,title:"Invoice #125863478945",secondary:(0,w.jsx)(_.Z,{}),children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"subtitle1",children:"Demo Company Inc."})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Address Line 1"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Address Line 2"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{component:u.rU,to:"#",variant:"body2",color:"primary",children:"demo@company.com"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"(+91) 9999 999 999"})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,sm:5,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"h5",children:"Customer :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"subtitle1",children:"John Doe"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Address Line 1"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Address Line 2"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"(+91) 9999 567 891"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{component:u.rU,to:"#",variant:"body2",color:"primary",children:"demo@company.com"})})]})})]})}),(0,w.jsx)(Z.ZP,{item:!0,sm:4,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"h5",children:"Order Details :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:4,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Date :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,children:(0,w.jsx)(p.Z,{variant:"body2",children:"November 14"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:4,sx:{my:.5},children:(0,w.jsx)(p.Z,{variant:"body2",children:"Status :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,sx:{my:.5},children:(0,w.jsx)(y.Z,{label:"Pending",variant:"outlined",size:"small",chipcolor:"warning"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:4,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Order Id :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,children:(0,w.jsx)(p.Z,{variant:"body2",component:u.rU,to:"#",children:"#146859"})})]})})]})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(C.Z,{})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"h6",children:"Terms and Condition :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"lorem ipsum dolor sit connecter adieu siccing eliot, sed do elusion tempore incident ut laborer et dolors magna aliquot."})})]})})]})})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,md:10,lg:8,children:(0,w.jsx)(Z.ZP,{container:!0,spacing:1,justifyContent:"center",sx:{maxWidth:850,mx:"auto",mt:0,mb:2.5,"& > .MuiCardContent-root":{py:{xs:3.75,md:5.5},px:{xs:2.5,md:5}}},children:(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(f.Z,{children:(0,w.jsx)(b(),{trigger:function(){return(0,w.jsx)(j.Z,{variant:"contained",children:"Print"})},content:function(){return e.current}})})})})})]})},S=i(33497),B=i(20563),D=i(35898),O=i(61689),z=i(19536),T=i(24631),R=i(6415),F=i(74652),I=i(12754),L=i(5866),W=i(54918),E=i(48514),M=i(70816),U=i.n(M),N=i(54285),Y=i(88587),V=i.n(Y),q=function(e){var n=e.calculation,i=(0,x.Z)();return(0,w.jsx)(P.Z,{sx:{mx:3,mb:3,bgcolor:"dark"===i.palette.mode?i.palette.dark.main:i.palette.primary.light},children:(0,w.jsx)(Z.ZP,{container:!0,justifyContent:"flex-end",spacing:k.dv,children:(0,w.jsx)(Z.ZP,{item:!0,sm:6,md:6,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",variant:"subtitle1",children:"Amount :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",variant:"body2",children:V()(n.bookingAmountPaid).format({symbol:"\u20b9"})})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",variant:"subtitle1",children:"Deductions :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",variant:"body2",children:V()(n.netDeductions).format({symbol:"\u20b9"})})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(z.Z,{sx:{bgcolor:"dark.main"}})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",color:"secondary",variant:"subtitle1",children:"Earnings :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",color:"secondary",variant:"subtitle1",children:V()(null===n||void 0===n?void 0:n.netReceivableByVenueOwner).format({symbol:"\u20b9"})})})]})})]})})})})},G=function(e){var n,i,a,s,d=e.venueBooking,u=e.refundData,x=e.fetchData,v=(0,I.I0)(),m=(0,N.Z)().user,h=(0,c.useState)(!1),g=(0,r.Z)(h,2),b=g[0],f=g[1],P=(0,c.useState)(!1),_=(0,r.Z)(P,2),C=_[0],A=_[1],B=(0,c.useState)(null),M=(0,r.Z)(B,2),Y=M[0],V=M[1],G=(0,c.useState)(""),$=(0,r.Z)(G,2),H=$[0],X=$[1],J=(0,c.useState)(""),K=(0,r.Z)(J,2),Q=K[0],ee=K[1],ne=(0,c.useState)(!1),ie=(0,r.Z)(ne,2),te=ie[0],re=ie[1],oe=(0,c.useState)(!1),ae=(0,r.Z)(oe,2),se=ae[0],le=ae[1],ce=(0,c.useState)(""),de=(0,r.Z)(ce,2),ue=de[0],xe=de[1],ve=(0,c.useRef)(),me=function(){var e=(0,t.Z)(l().mark((function e(){var n,i,t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={entity:"venue_booking",entity_id:d.booking_id,reason:Y,date:U()().format("YYYY-MM-DD")},e.prev=1,e.next=4,E.Z.postForm("/api/cancel",(0,o.Z)({},n));case 4:i=e.sent,console.log(i),A(!1),v((0,L.ss)({open:!0,message:"Your venue booking cancellation request is successful. In case of any refund eligibility, check booking details",variant:"alert",alert:{color:"success"},close:!1})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),v((0,L.ss)({open:!0,message:(null===e.t0||void 0===e.t0||null===(t=e.t0.data)||void 0===t?void 0:t.message)||"An error occured",variant:"alert",alert:{color:"error"},close:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=function(e){var n,i;"venue_booking_payment_interaction"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(v((0,L.ss)({open:!0,message:"Payment was successful",variant:"alert",alert:{color:"success"},close:!1})),null===(i=window.paymentWindow)||void 0===i||i.close());console.log(e.data)};return window.addEventListener("message",e,!1),function(){clearInterval(ve.current),window.removeEventListener("message",e)}}),[]);var he=(0,c.useMemo)((function(){var e="";if("rejected"===(null===d||void 0===d?void 0:d.status))e=d.reject_reason;else if("cancelled"===(null===d||void 0===d?void 0:d.status)){var n;e=null===(n=d.cancel_log)||void 0===n?void 0:n.reason}return e}),[d]);return(0,w.jsxs)(S.Z,{title:null===d||void 0===d||null===(n=d.venue)||void 0===n?void 0:n.title,secondary:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,item:!0,xs:12,justifyContent:"flex-end",children:["booked"===(null===d||void 0===d?void 0:d.status)&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(j.Z,{variant:"outlined",label:"Cancel",onClick:function(){A(!0)},color:"error",children:"Cancel Booking"})}),("pending"===(null===d||void 0===d?void 0:d.status)||"accepted_with_booking_amount"===(null===d||void 0===d?void 0:d.status))&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(j.Z,{variant:"outlined",label:"Reject",onClick:function(){le(!0)},color:"error",children:"Reject"})}),"pending"===(null===d||void 0===d?void 0:d.status)&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(j.Z,{variant:"outlined",label:"Cancel",onClick:function(){X(""),ee(""),re(!0)},color:"success",children:"Approve"})}),"accepted_with_booking_amount"===(null===d||void 0===d?void 0:d.status)&&(null===d||void 0===d?void 0:d.venue_owner_id)!=(null===m||void 0===m?void 0:m.id)&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(j.Z,{variant:"outlined",label:"Cancel",onClick:function(){f(!0)},color:"success",children:"Process Payment"})})]}),children:[(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(D.Z,{spacing:1,children:[(0,w.jsx)(p.Z,{children:"Booking Status: "}),(0,w.jsx)(O.Z,{title:he,placement:"top-end",children:(0,w.jsx)("span",{children:(0,w.jsx)(y.Z,{label:null===(i=k.au[null===d||void 0===d?void 0:d.status])||void 0===i?void 0:i.title,size:"small",chipcolor:null===(a=k.au[null===d||void 0===d?void 0:d.status])||void 0===a?void 0:a.color,variant:"outlined",sx:{maxWidth:"fit-content"}})})}),(0,w.jsx)(p.Z,{children:null===(s=k.au[null===d||void 0===d?void 0:d.status])||void 0===s?void 0:s.description})]})}),("booked"===(null===d||void 0===d?void 0:d.status)||"accepted"===(null===d||void 0===d?void 0:d.status)||"cancelled"===(null===d||void 0===d?void 0:d.status))&&(0,w.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(D.Z,{spacing:1,children:[(0,w.jsx)(p.Z,{children:"Advance Amount Paid: "}),(0,w.jsx)(y.Z,{label:(0,W.$)(null===d||void 0===d?void 0:d.advance_amount),size:"small",chipcolor:"success",variant:"outlined",sx:{maxWidth:"fit-content"}})]})}),u&&(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(D.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,w.jsx)(p.Z,{children:"Refund Amount: "}),(0,w.jsx)(y.Z,{label:"".concat(u.status," : ").concat((0,W.$)(u.amount)),size:"small",chipcolor:"completed"===u.status?"success":"orange",variant:"outlined",sx:{maxWidth:"fit-content"}})]})})]}),(null===m||void 0===m?void 0:m.id)===(null===d||void 0===d?void 0:d.venue_owner_id)&&!(null!==d&&void 0!==d&&d.is_cancel)&&"booked"===(null===d||void 0===d?void 0:d.status)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(z.Z,{sx:{my:1}}),(0,w.jsxs)(D.Z,{spacing:1,children:[(0,w.jsx)(p.Z,{children:"Earnings: "}),(0,w.jsx)(q,{calculation:{bookingAmountPaid:100,taxOnBookingAmount:0,taxOnBookingAmountBreakup:[{taxType:"GST",taxPercentage:0,calculatedTax:0}],minusTaxAmount:100,totalCommission:8.26,pgVenueOwnerFees:1.18,netDeductions:9.44,pgFees:2.36,pgVenueOwnerFeesBreakup:{fees:1,feesPercentage:1,tax:.18,taxPercentage:18},pgFeesBreakup:{fees:2,feesPercentage:2,tax:.36,taxPercentage:18},commissionBreakup:{commissionOn:100,fees:7,tax:1.26,taxPercentage:18},netReceivableByVenueOwner:90.56}})]})]}),(0,w.jsx)(R.Z,{open:b,setOpen:f,confirmLabel:"Continue",onConfirm:function(){var e={id:d.booking_id};v((0,F.HF)(e,(function(e){var n=null===e||void 0===e?void 0:e.payment_link;if(n){var i=window.open(n,"popUpWindow","height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes");window.paymentWindow=i,ve.current=setInterval((function(){i.closed&&(clearInterval(ve.current),x(d.booking_id))}),1e3),f(!1)}else v((0,L.ss)({open:!0,message:"Please try again later",variant:"alert",alert:{color:"error"},close:!1}))}),(function(e){v((0,L.ss)({open:!0,message:(null===e||void 0===e?void 0:e.message)||"An error occured",variant:"alert",alert:{color:"error"},close:!1}))})))},onCancel:function(){return f(!1)},invertButtons:!0,title:(0,w.jsxs)("span",{children:["Proceed to pay the booking amount ",(0,w.jsx)("b",{children:(0,W.$)(null===d||void 0===d?void 0:d.advance_amount)}),"?"]})}),(0,w.jsx)(R.Z,{open:C,setOpen:A,onConfirm:me,onCancel:function(){return A(!1)},confirmLabel:"Cancel Booking",cancelLabel:"Close",allowEscape:!1,allowClickAway:!1,confirmButtonProps:{disabled:""==(null===Y||void 0===Y?void 0:Y.trim())},content:(0,w.jsxs)(D.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(T.Z,{size:"small",label:"Cancel Reason",value:Y,onChange:function(e){return V(e.target.value)}}),(!Y||""==(null===Y||void 0===Y?void 0:Y.trim()))&&(0,w.jsx)(p.Z,{color:"error",variant:"caption",children:"Please fill cancel reason"})]})}),(0,w.jsx)(R.Z,{open:te,setOpen:re,confirmLabel:"Approve",onConfirm:function(){var e={id:d.booking_id,advance_amount:H>0?H:void 0,final_amount:Q||0,status:H>0?"accepted_with_booking_amount":"accepted",_method:"put"};v((0,F.lW)(e,(function(){re(!1)})))},onCancel:function(){return re(!1)},invertButtons:!0,content:(0,w.jsxs)(D.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(T.Z,{type:"number",size:"small",label:"Advance Amount",value:H,onChange:function(e){return X(e.target.value)}}),(0,w.jsx)(T.Z,{type:"number",size:"small",label:"Final Amount(optional)",value:Q,onChange:function(e){return ee(e.target.value)}}),(Number.isNaN(parseFloat(H))||parseFloat(H)<0)&&(0,w.jsx)(p.Z,{color:"error",variant:"caption",children:"Advance Amount should be greater than or equal to 0"})]})}),(0,w.jsx)(R.Z,{open:se,setOpen:le,onConfirm:function(){var e={id:d.booking_id,reject_reason:ue,status:"rejected",_method:"put"};v((0,F.lW)(e,(function(){le(!1)})))},onCancel:function(){return le(!1)},confirmLabel:"Reject",content:(0,w.jsxs)(D.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(T.Z,{size:"small",label:"Reject Reason",value:ue,onChange:function(e){return xe(e.target.value)}}),(!ue||""==(null===ue||void 0===ue?void 0:ue.trim()))&&(0,w.jsx)(p.Z,{color:"error",variant:"caption",children:"Please fill reject reason"})]})})]})},$=["children","value","index"];function H(e){var n=e.children,i=e.value,t=e.index,r=(0,a.Z)(e,$);return(0,w.jsx)("div",(0,o.Z)((0,o.Z)({role:"tabpanel",hidden:i!==t,id:"simple-tabpanel-".concat(t),"aria-labelledby":"simple-tab-".concat(t)},r),{},{children:i===t&&(0,w.jsx)(v.Z,{sx:{p:0},children:n})}))}var X=function(e){var n,i,a=e.parentBookingId,s=(0,x.Z)(),v=(0,c.useState)(0),Z=(0,r.Z)(v,2),p=Z[0],j=Z[1],g=(0,c.useState)(null),b=(0,r.Z)(g,2),f=b[0],P=b[1],y=(0,c.useState)(null),_=(0,r.Z)(y,2),k=_[0],C=_[1],D=(0,d.UO)().bookingId,O=(0,c.useMemo)((function(){return a||D}),[a,D]),z=function(){var e=(0,t.Z)(l().mark((function e(n){var i,t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.Z.get("/api/venue-bookings/".concat(n));case 3:t=e.sent,(r=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data).is_cancel&&(r.status="cancelled"),P(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),T=function(){var e=(0,t.Z)(l().mark((function e(n){var i,t,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.Z.get("/api/refund/".concat(n));case 3:t=e.sent,r=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data,C(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){O&&z(O)}),[O,p]),(0,c.useEffect)((function(){var e,n=null===f||void 0===f||null===(e=f.cancel_log)||void 0===e?void 0:e.refund_id;n&&T(n)}),[null===f||void 0===f||null===(n=f.cancel_log)||void 0===n?void 0:n.refund_id]),(0,w.jsxs)(S.Z,{children:[(0,w.jsx)(m.Z,{value:p,indicatorColor:"primary",textColor:"primary",onChange:function(e,n){j(n)},variant:"scrollable","aria-label":"simple tabs example",sx:{"& a":{minHeight:"auto",minWidth:10,px:1,py:1.5,mr:2.25,color:s.palette.grey[600],display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},"& a.Mui-selected":{color:s.palette.primary.main},"& a > svg":{marginBottom:"0px !important",marginRight:1.25},mb:3},children:(0,w.jsx)(h.Z,(0,o.Z)({icon:(0,w.jsx)(B.Z,{}),component:u.rU,to:"#",label:"Details"},(i=0,{id:"simple-tab-".concat(i),"aria-controls":"simple-tabpanel-".concat(i)})))}),(0,w.jsx)(H,{value:p,index:0,children:(0,w.jsx)(G,{venueBooking:f,refundData:k,fetchData:z})}),(0,w.jsx)(H,{value:p,index:1,children:(0,w.jsx)(A,{bookingForOrder:f})})]})}}}]);