"use strict";(self.webpackChunkshmooz=self.webpackChunkshmooz||[]).push([[2347],{74941:function(e,n,i){var t=i(1413),r=i(45987),o=i(7276),l=i(50169),s=i(10981),a=i(61280),c=i(85535),d=i(6334),u=i(35970),x=i(45263),v=["children","content","contentClass","darkTitle","secondary","sx","contentSX","title"],h=o.forwardRef((function(e,n){var i=e.children,o=e.content,h=e.contentClass,m=e.darkTitle,Z=e.secondary,j=e.sx,p=void 0===j?{}:j,g=e.contentSX,b=void 0===g?{}:g,f=e.title,y=(0,r.Z)(e,v),P=(0,l.Z)();return(0,x.jsxs)(s.Z,(0,t.Z)((0,t.Z)({ref:n,sx:(0,t.Z)({border:"1px solid",borderColor:"dark"===P.palette.mode?P.palette.dark.light+15:P.palette.grey[200],":hover":{boxShadow:"dark"===P.palette.mode?"0 2px 14px 0 rgb(33 150 243 / 10%)":"0 2px 14px 0 rgb(32 40 45 / 8%)"}},p)},y),{},{children:[!m&&f&&(0,x.jsx)(a.Z,{sx:{p:2.5},title:(0,x.jsx)(c.Z,{variant:"h5",children:f}),action:Z}),m&&f&&(0,x.jsx)(a.Z,{sx:{p:2.5},title:(0,x.jsx)(c.Z,{variant:"h4",children:f}),action:Z}),f&&(0,x.jsx)(d.Z,{sx:{opacity:1,borderColor:"dark"===P.palette.mode?P.palette.dark.light+15:P.palette.grey[200]}}),o&&(0,x.jsx)(u.Z,{sx:(0,t.Z)({p:2.5},b),className:h||"",children:i}),!o&&i]}))}));h.defaultProps={content:!0},n.Z=h},23100:function(e,n,i){var t=i(65173),r=i(85535),o=i(6334),l=i(50169),s=i(58259),a=i.n(s),c=i(74941),d=i(45263);n.Z=function(e){var n,i,s,u=e.checkout,x=(0,l.Z)(),v=(null===u||void 0===u?void 0:u.tickets.reduce((function(e,n){var i,t,r=0;return(null===n||void 0===n||null===(i=n.final_payable_price_breakup)||void 0===i||null===(t=i.tax_details)||void 0===t?void 0:t.length)>0&&(r=n.final_payable_price_breakup.tax_details.reduce((function(e,n){return e+ +n.tax_amount}),0)),r+e}),0))||0,h=(null===u||void 0===u?void 0:u.tickets.reduce((function(e,n){var i;return+((null===n||void 0===n||null===(i=n.final_payable_price_breakup)||void 0===i?void 0:i.total_tax_applied_on)||0)+e}),0))||0,m=(null===u||void 0===u?void 0:u.tickets.reduce((function(e,n){var i=null===n||void 0===n?void 0:n.final_payable_price_breakup;return+i.booking_fees+ +i.CGST_on_booking_fees+ +i.SGST_on_booking_fees+e}),0))||0,Z=+((null===u||void 0===u||null===(n=u.total_gross_payable_breakup)||void 0===n?void 0:n.platform_fees)||0);return(0,d.jsx)(c.Z,{content:!1,sx:{mx:2,mb:1,p:2,bgcolor:"dark"===x.palette.mode?x.palette.dark.main:x.palette.primary.light},children:(0,d.jsx)(t.ZP,{container:!0,justifyContent:"flex-end",spacing:2,children:(0,d.jsx)(t.ZP,{item:!0,sm:6,md:6,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Sub Total :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:a()(h).format({symbol:"\u20b9"})})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Taxes (Tickets) :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:a()(v).format({symbol:"\u20b9"})})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Booking Fees :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:null==m?"-":a()(m).format({symbol:"\u20b9"})})}),(null===u||void 0===u?void 0:u.commission_paid_by_end_user)&&(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Organizer Commission:"})}),(null===u||void 0===u?void 0:u.commission_paid_by_end_user)&&(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:Z<=0?"-":a()(Z).format({symbol:"\u20b9"})})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Coupon Discount :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:(null===u||void 0===u||null===(i=u.discount_by_shmooz_breakup)||void 0===i?void 0:i.discount_amount)<=0?"-":a()(null===u||void 0===u||null===(s=u.discount_by_shmooz_breakup)||void 0===s?void 0:s.discount_amount).format({symbol:"\u20b9"})})})]})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(o.Z,{sx:{borderColor:"secondary.light"}})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",color:"secondary",variant:"subtitle1",children:"Total :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",color:"secondary",variant:"subtitle1",children:a()(null===u||void 0===u?void 0:u.total_net_payable).format({symbol:"\u20b9"})})})]})})]})})})})}},83983:function(e,n,i){i.r(n),i.d(n,{default:function(){return V}});var t=i(15861),r=i(29439),o=i(1413),l=i(45987),s=i(64687),a=i.n(s),c=i(7276),d=i(95173),u=i(45254),x=i(50169),v=i(42037),h=i(62092),m=i(38121),Z=i(65173),j=i(85535),p=i(31342),g=i(46854),b=i.n(g),f=i(19972),y=i(74941),P=i(42375),_=i(83458),k=i(43767),C=i(23100),w=i(45263),S=function(){var e=(0,c.useRef)(null);return(0,w.jsxs)(Z.ZP,{container:!0,justifyContent:"center",spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,md:10,lg:8,ref:e,children:(0,w.jsx)(y.Z,{darkTitle:!0,title:"Invoice #125863478945",secondary:(0,w.jsx)(_.Z,{}),children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"subtitle1",children:"Demo Company Inc."})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Address Line 1"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Address Line 2"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{component:u.rU,to:"#",variant:"body2",color:"primary",children:"demo@company.com"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"(+91) 9999 999 999"})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,sm:5,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"h5",children:"Customer :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"subtitle1",children:"John Doe"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Address Line 1"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Address Line 2"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"(+91) 9999 567 891"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{component:u.rU,to:"#",variant:"body2",color:"primary",children:"demo@company.com"})})]})})]})}),(0,w.jsx)(Z.ZP,{item:!0,sm:4,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"h5",children:"Order Details :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:4,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Date :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,children:(0,w.jsx)(j.Z,{variant:"body2",children:"November 14"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:4,sx:{my:.5},children:(0,w.jsx)(j.Z,{variant:"body2",children:"Status :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,sx:{my:.5},children:(0,w.jsx)(P.Z,{label:"Pending",variant:"outlined",size:"small",chipcolor:"warning"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:4,children:(0,w.jsx)(j.Z,{variant:"body2",children:"Order Id :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,children:(0,w.jsx)(j.Z,{variant:"body2",component:u.rU,to:"#",children:"#146859"})})]})})]})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(C.Z,{})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"h6",children:"Terms and Condition :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(j.Z,{variant:"body2",children:"lorem ipsum dolor sit connecter adieu siccing eliot, sed do elusion tempore incident ut laborer et dolors magna aliquot."})})]})})]})})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,md:10,lg:8,children:(0,w.jsx)(Z.ZP,{container:!0,spacing:1,justifyContent:"center",sx:{maxWidth:850,mx:"auto",mt:0,mb:2.5,"& > .MuiCardContent-root":{py:{xs:3.75,md:5.5},px:{xs:2.5,md:5}}},children:(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(f.Z,{children:(0,w.jsx)(b(),{trigger:function(){return(0,w.jsx)(p.Z,{variant:"contained",children:"Print"})},content:function(){return e.current}})})})})})]})},A=i(53904),D=i(98791),R=i(20045),O=i(20495),I=i(6334),z=i(44390),B=i(21604),L=i(86011),T=i(49042),E=i(4471),W=i(63601),M=i(93449),U=i(4550),F=i.n(U),Y=i(83303),$=i(58259),q=i.n($),G=function(e){var n=e.calculation,i=(0,x.Z)();return(0,w.jsx)(y.Z,{sx:{mx:3,mb:3,bgcolor:"dark"===i.palette.mode?i.palette.dark.main:i.palette.primary.light},children:(0,w.jsx)(Z.ZP,{container:!0,justifyContent:"flex-end",spacing:k.dv,children:(0,w.jsx)(Z.ZP,{item:!0,sm:6,md:6,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",variant:"subtitle1",children:"Amount :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",variant:"body2",children:q()(n.bookingAmountPaid).format({symbol:"\u20b9"})})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",variant:"subtitle1",children:"Deductions :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",variant:"body2",children:q()(n.netDeductions).format({symbol:"\u20b9"})})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(I.Z,{sx:{bgcolor:"dark.main"}})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",color:"secondary",variant:"subtitle1",children:"Earnings :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(j.Z,{align:"right",color:"secondary",variant:"subtitle1",children:q()(null===n||void 0===n?void 0:n.netReceivableByVenueOwner).format({symbol:"\u20b9"})})})]})})]})})})})},H=i(81970),N=function(e){var n,i,l,s,d,u=e.venueBooking,x=e.refundData,v=e.fetchData,h=e.isReadOnly,m=(0,T.I0)(),g=(0,Y.Z)().user,b=(0,c.useState)(!1),f=(0,r.Z)(b,2),y=f[0],_=f[1],C=(0,c.useState)(!1),S=(0,r.Z)(C,2),D=S[0],U=S[1],$=(0,c.useState)(null),q=(0,r.Z)($,2),N=q[0],X=q[1],J=(0,c.useState)(!1),V=(0,r.Z)(J,2),K=V[0],Q=V[1],ee=(0,c.useState)(!1),ne=(0,r.Z)(ee,2),ie=ne[0],te=ne[1],re=(0,c.useState)(""),oe=(0,r.Z)(re,2),le=oe[0],se=oe[1],ae=(0,c.useRef)(),ce=function(){var e=(0,t.Z)(a().mark((function e(){var n,i,t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={entity:"venue_booking",entity_id:u.booking_id,reason:N,date:F()().format("YYYY-MM-DD")},e.prev=1,e.next=4,M.Z.postForm("/api/cancel",(0,o.Z)({},n));case 4:i=e.sent,console.log(i),U(!1),m((0,E.ss)({open:!0,message:"Your venue booking cancellation request is successful. In case of any refund eligibility, check booking details",variant:"alert",alert:{color:"success"},close:!1})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),m((0,E.ss)({open:!0,message:(null===e.t0||void 0===e.t0||null===(t=e.t0.data)||void 0===t?void 0:t.message)||"An error occured",variant:"alert",alert:{color:"error",severity:"error"},close:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=function(e){var n,i;"venue_booking_payment_interaction"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(m((0,E.ss)({open:!0,message:"Payment was successful",variant:"alert",alert:{color:"success"},close:!1})),null===(i=window.paymentWindow)||void 0===i||i.close());console.log(e.data)};return window.addEventListener("message",e,!1),function(){clearInterval(ae.current),window.removeEventListener("message",e)}}),[]);var de=(0,c.useMemo)((function(){var e="";if("rejected"===(null===u||void 0===u?void 0:u.status))e=u.reject_reason;else if("cancelled"===(null===u||void 0===u?void 0:u.status)){var n;e=null===(n=u.cancel_log)||void 0===n?void 0:n.reason}return e}),[u]);return(0,w.jsxs)(A.Z,{title:null===u||void 0===u||null===(n=u.venue)||void 0===n?void 0:n.title,secondary:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,item:!0,xs:12,justifyContent:"flex-end",children:[("booked"===(null===u||void 0===u?void 0:u.status)||"accepted"===(null===u||void 0===u?void 0:u.status))&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(p.Z,{disabled:h,variant:"outlined",label:"Cancel",onClick:function(){U(!0)},color:"error",children:"Cancel Booking"})}),("pending"===(null===u||void 0===u?void 0:u.status)||"accepted_with_booking_amount"===(null===u||void 0===u?void 0:u.status))&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(p.Z,{variant:"outlined",label:"Reject",onClick:function(){te(!0)},color:"error",children:"Reject"})}),"pending"===(null===u||void 0===u?void 0:u.status)&&((null===g||void 0===g?void 0:g.isAdmin)||(null===u||void 0===u?void 0:u.venue_owner_id)==(null===g||void 0===g?void 0:g.id))&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(p.Z,{variant:"outlined",label:"Cancel",onClick:function(){Q(!0)},color:"success",children:"Approve"})}),"accepted_with_booking_amount"===(null===u||void 0===u?void 0:u.status)&&(null===u||void 0===u?void 0:u.venue_owner_id)!=(null===g||void 0===g?void 0:g.id)&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(p.Z,{variant:"outlined",label:"Cancel",onClick:function(){_(!0)},color:"success",children:"Process Payment"})})]}),children:[(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(R.Z,{spacing:1,children:[(0,w.jsx)(j.Z,{children:"Booking Status: "}),(0,w.jsx)(O.Z,{title:de,placement:"top-end",children:(0,w.jsx)("span",{children:(0,w.jsx)(P.Z,{label:null===(i=k.au[null===u||void 0===u?void 0:u.status])||void 0===i?void 0:i.title,size:"small",chipcolor:null===(l=k.au[null===u||void 0===u?void 0:u.status])||void 0===l?void 0:l.color,variant:"outlined",sx:{maxWidth:"fit-content"}})})}),(0,w.jsx)(j.Z,{children:null===(s=k.au[null===u||void 0===u?void 0:u.status])||void 0===s?void 0:s.description})]})}),("booked"===(null===u||void 0===u?void 0:u.status)||"accepted"===(null===u||void 0===u?void 0:u.status)||"cancelled"===(null===u||void 0===u?void 0:u.status))&&(0,w.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(R.Z,{spacing:1,children:[(0,w.jsx)(j.Z,{children:"Advance Amount Paid: "}),(0,w.jsx)(P.Z,{label:(0,W.$)(null===u||void 0===u?void 0:u.advance_amount),size:"small",chipcolor:"success",variant:"outlined",sx:{maxWidth:"fit-content"}})]})}),x&&(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(R.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,w.jsx)(j.Z,{children:"Refund Amount: "}),(0,w.jsx)(P.Z,{label:"".concat(x.status," : ").concat((0,W.$)(x.amount)),size:"small",chipcolor:"completed"===x.status?"success":"orange",variant:"outlined",sx:{maxWidth:"fit-content"}})]})})]}),(null===g||void 0===g?void 0:g.id)===(null===u||void 0===u?void 0:u.venue_owner_id)&&!(null!==u&&void 0!==u&&u.is_cancel)&&"booked"===(null===u||void 0===u?void 0:u.status)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(I.Z,{sx:{my:1}}),(0,w.jsxs)(R.Z,{spacing:1,children:[(0,w.jsx)(j.Z,{children:"Earnings: "}),(0,w.jsx)(G,{calculation:null===(d=u.transaction)||void 0===d?void 0:d.amount_calculations})]})]}),(0,w.jsx)(B.Z,{open:y,setOpen:_,confirmLabel:"Continue",onConfirm:function(){var e={id:u.booking_id};m((0,L.HF)(e,(function(e){var n=null===e||void 0===e?void 0:e.payment_link;if(n){var i=window.open(n,"popUpWindow","height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes");window.paymentWindow=i,ae.current=setInterval((function(){i.closed&&(clearInterval(ae.current),v(u.booking_id))}),1e3),_(!1)}else m((0,E.ss)({open:!0,message:"Please try again later",variant:"alert",alert:{color:"error",severity:"error"},close:!1}))}),(function(e){m((0,E.ss)({open:!0,message:(null===e||void 0===e?void 0:e.message)||"An error occured",variant:"alert",alert:{color:"error",severity:"error"},close:!1}))})))},onCancel:function(){return _(!1)},invertButtons:!0,title:(0,w.jsxs)("span",{children:["Proceed to pay the booking amount ",(0,w.jsx)("b",{children:(0,W.$)(null===u||void 0===u?void 0:u.advance_amount)}),"?"]})}),(0,w.jsx)(B.Z,{open:D,setOpen:U,onConfirm:ce,onCancel:function(){return U(!1)},confirmLabel:"Cancel Booking",cancelLabel:"Close",allowEscape:!1,allowClickAway:!1,confirmButtonProps:{disabled:""==(null===N||void 0===N?void 0:N.trim())},content:(0,w.jsxs)(R.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(z.Z,{size:"small",label:"Cancel Reason",value:N,onChange:function(e){return X(e.target.value)}}),(!N||""==(null===N||void 0===N?void 0:N.trim()))&&(0,w.jsx)(j.Z,{color:"error",variant:"caption",children:"Please fill cancel reason"})]})}),K&&(0,w.jsx)(H.Z,{approveOpen:K,setApproveOpen:Q,bookingId:u.booking_id}),(0,w.jsx)(B.Z,{open:ie,setOpen:te,onConfirm:function(){var e={id:u.booking_id,reject_reason:le,status:"rejected",_method:"put"};m((0,L.lW)(e,(function(){te(!1)})))},onCancel:function(){return te(!1)},confirmLabel:"Reject",content:(0,w.jsxs)(R.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(z.Z,{size:"small",label:"Reject Reason",value:le,onChange:function(e){return se(e.target.value)}}),(!le||""==(null===le||void 0===le?void 0:le.trim()))&&(0,w.jsx)(j.Z,{color:"error",variant:"caption",children:"Please fill reject reason"})]})})]})},X=["children","value","index"];function J(e){var n=e.children,i=e.value,t=e.index,r=(0,l.Z)(e,X);return(0,w.jsx)("div",(0,o.Z)((0,o.Z)({role:"tabpanel",hidden:i!==t,id:"simple-tabpanel-".concat(t),"aria-labelledby":"simple-tab-".concat(t)},r),{},{children:i===t&&(0,w.jsx)(v.Z,{sx:{p:0},children:n})}))}var V=function(e){var n,i,l=e.parentBookingId,s=e.isReadOnly,v=(0,x.Z)(),Z=(0,c.useState)(0),j=(0,r.Z)(Z,2),p=j[0],g=j[1],b=(0,c.useState)(null),f=(0,r.Z)(b,2),y=f[0],P=f[1],_=(0,c.useState)(null),k=(0,r.Z)(_,2),C=k[0],R=k[1],O=(0,d.UO)().bookingId,I=(0,u.lr)(),z=(0,r.Z)(I,2),B=z[0],L=(z[1],B.get("order_number")),T=(0,c.useMemo)((function(){return l||O}),[l,O]),E=function(){var e=(0,t.Z)(a().mark((function e(n){var i,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.Z.get("/api/venue-bookings/".concat(n));case 3:t=e.sent,(r=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data).is_cancel&&(r.status="cancelled"),P(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=(0,t.Z)(a().mark((function e(n){var i,t,r,o,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.Z.get("/api/venue-bookings",{params:{order_number:n}});case 3:o=e.sent,null!==(l=(null===o||void 0===o||null===(i=o.data)||void 0===i||null===(t=i.data)||void 0===t?void 0:t.length)>0?null===o||void 0===o||null===(r=o.data)||void 0===r?void 0:r.data[0]:null)&&void 0!==l&&l.is_cancel&&(l.status="cancelled"),P(l),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),U=function(){var e=(0,t.Z)(a().mark((function e(n){var i,t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.Z.get("/api/refund/".concat(n));case 3:t=e.sent,r=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data,R(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){T&&E(T)}),[T,p]),(0,c.useEffect)((function(){L&&W(L)}),[L,p]),(0,c.useEffect)((function(){var e,n=null===y||void 0===y||null===(e=y.cancel_log)||void 0===e?void 0:e.refund_id;n&&U(n)}),[null===y||void 0===y||null===(n=y.cancel_log)||void 0===n?void 0:n.refund_id]),(0,w.jsxs)(A.Z,{children:[(0,w.jsx)(h.Z,{value:p,indicatorColor:"primary",textColor:"primary",onChange:function(e,n){g(n)},variant:"scrollable","aria-label":"simple tabs example",sx:{"& a":{minHeight:"auto",minWidth:10,px:1,py:1.5,mr:2.25,color:v.palette.grey[600],display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},"& a.Mui-selected":{color:v.palette.primary.main},"& a > svg":{marginBottom:"0px !important",marginRight:1.25},mb:3},children:(0,w.jsx)(m.Z,(0,o.Z)({icon:(0,w.jsx)(D.Z,{}),component:u.rU,to:"#",label:"Details"},(i=0,{id:"simple-tab-".concat(i),"aria-controls":"simple-tabpanel-".concat(i)})))}),(0,w.jsx)(J,{value:p,index:0,children:(0,w.jsx)(N,{venueBooking:y,refundData:C,fetchData:E,isReadOnly:s})}),(0,w.jsx)(J,{value:p,index:1,children:(0,w.jsx)(S,{bookingForOrder:y})})]})}}}]);