"use strict";(self.webpackChunkshmooz=self.webpackChunkshmooz||[]).push([[4050],{1759:function(e,n,i){var t=i(1413),r=i(45987),o=i(47313),a=i(19860),l=i(73428),s=i(54641),c=i(61113),d=i(19536),u=i(93405),x=i(46417),v=["children","content","contentClass","darkTitle","secondary","sx","contentSX","title"],h=o.forwardRef((function(e,n){var i=e.children,o=e.content,h=e.contentClass,m=e.darkTitle,Z=e.secondary,p=e.sx,j=void 0===p?{}:p,g=e.contentSX,f=void 0===g?{}:g,b=e.title,y=(0,r.Z)(e,v),P=(0,a.Z)();return(0,x.jsxs)(l.Z,(0,t.Z)((0,t.Z)({ref:n,sx:(0,t.Z)({border:"1px solid",borderColor:"dark"===P.palette.mode?P.palette.dark.light+15:P.palette.grey[200],":hover":{boxShadow:"dark"===P.palette.mode?"0 2px 14px 0 rgb(33 150 243 / 10%)":"0 2px 14px 0 rgb(32 40 45 / 8%)"}},j)},y),{},{children:[!m&&b&&(0,x.jsx)(s.Z,{sx:{p:2.5},title:(0,x.jsx)(c.Z,{variant:"h5",children:b}),action:Z}),m&&b&&(0,x.jsx)(s.Z,{sx:{p:2.5},title:(0,x.jsx)(c.Z,{variant:"h4",children:b}),action:Z}),b&&(0,x.jsx)(d.Z,{sx:{opacity:1,borderColor:"dark"===P.palette.mode?P.palette.dark.light+15:P.palette.grey[200]}}),o&&(0,x.jsx)(u.Z,{sx:(0,t.Z)({p:2.5},f),className:h||"",children:i}),!o&&i]}))}));h.defaultProps={content:!0},n.Z=h},89544:function(e,n,i){var t=i(9019),r=i(61113),o=i(19536),a=i(19860),l=i(88587),s=i.n(l),c=i(1759),d=i(46417);n.Z=function(e){var n,i,l,u=e.checkout,x=(0,a.Z)(),v=(null===u||void 0===u?void 0:u.tickets.reduce((function(e,n){var i,t,r=0;return(null===n||void 0===n||null===(i=n.final_payable_price_breakup)||void 0===i||null===(t=i.tax_details)||void 0===t?void 0:t.length)>0&&(r=n.final_payable_price_breakup.tax_details.reduce((function(e,n){return e+ +n.tax_amount}),0)),r+e}),0))||0,h=(null===u||void 0===u?void 0:u.tickets.reduce((function(e,n){var i;return+((null===n||void 0===n||null===(i=n.final_payable_price_breakup)||void 0===i?void 0:i.total_tax_applied_on)||0)+e}),0))||0,m=(null===u||void 0===u?void 0:u.tickets.reduce((function(e,n){var i=null===n||void 0===n?void 0:n.final_payable_price_breakup;return+i.booking_fees+ +i.CGST_on_booking_fees+ +i.SGST_on_booking_fees+e}),0))||0,Z=+((null===u||void 0===u||null===(n=u.total_gross_payable_breakup)||void 0===n?void 0:n.platform_fees)||0);return(0,d.jsx)(c.Z,{content:!1,sx:{mx:2,mb:1,p:2,bgcolor:"dark"===x.palette.mode?x.palette.dark.main:x.palette.primary.light},children:(0,d.jsx)(t.ZP,{container:!0,justifyContent:"flex-end",spacing:2,children:(0,d.jsx)(t.ZP,{item:!0,sm:6,md:6,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Sub Total :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:s()(h).format({symbol:"\u20b9"})})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Taxes (Tickets) :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:s()(v).format({symbol:"\u20b9"})})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Booking Fees :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:m<=0?"-":s()(m).format({symbol:"\u20b9"})})}),(null===u||void 0===u?void 0:u.commission_paid_by_end_user)&&(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Organizer Commission:"})}),(null===u||void 0===u?void 0:u.commission_paid_by_end_user)&&(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:Z<=0?"-":s()(Z).format({symbol:"\u20b9"})})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"subtitle1",children:"Coupon Discount :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",variant:"body2",children:(null===u||void 0===u||null===(i=u.discount_by_shmooz_breakup)||void 0===i?void 0:i.discount_amount)<=0?"-":s()(null===u||void 0===u||null===(l=u.discount_by_shmooz_breakup)||void 0===l?void 0:l.discount_amount).format({symbol:"\u20b9"})})})]})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsx)(o.Z,{sx:{borderColor:"secondary.light"}})}),(0,d.jsx)(t.ZP,{item:!0,xs:12,children:(0,d.jsxs)(t.ZP,{container:!0,spacing:1,children:[(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",color:"secondary",variant:"subtitle1",children:"Total :"})}),(0,d.jsx)(t.ZP,{item:!0,xs:6,children:(0,d.jsx)(r.Z,{align:"right",color:"secondary",variant:"subtitle1",children:s()(null===u||void 0===u?void 0:u.total_net_payable).format({symbol:"\u20b9"})})})]})})]})})})})}},44050:function(e,n,i){i.r(n),i.d(n,{default:function(){return te}});var t=i(15861),r=i(29439),o=i(1413),a=i(45987),l=i(64687),s=i.n(l),c=i(47313),d=i(58467),u=i(2135),x=i(19860),v=i(9506),h=i(82294),m=i(65280),Z=i(9019),p=i(61113),j=i(24193),g=i(43295),f=i.n(g),b=i(66182),y=i(1759),P=i(39236),_=i(48080),k=i(12401),C=i(89544),w=i(46417),S=function(){var e=(0,c.useRef)(null);return(0,w.jsxs)(Z.ZP,{container:!0,justifyContent:"center",spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,md:10,lg:8,ref:e,children:(0,w.jsx)(y.Z,{darkTitle:!0,title:"Invoice #125863478945",secondary:(0,w.jsx)(_.Z,{}),children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"subtitle1",children:"Demo Company Inc."})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Address Line 1"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Address Line 2"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{component:u.rU,to:"#",variant:"body2",color:"primary",children:"demo@company.com"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"(+91) 9999 999 999"})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:k.dv,children:[(0,w.jsx)(Z.ZP,{item:!0,sm:5,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"h5",children:"Customer :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"subtitle1",children:"John Doe"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Address Line 1"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Address Line 2"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"(+91) 9999 567 891"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{component:u.rU,to:"#",variant:"body2",color:"primary",children:"demo@company.com"})})]})})]})}),(0,w.jsx)(Z.ZP,{item:!0,sm:4,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"h5",children:"Order Details :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:0,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:4,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Date :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,children:(0,w.jsx)(p.Z,{variant:"body2",children:"November 14"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:4,sx:{my:.5},children:(0,w.jsx)(p.Z,{variant:"body2",children:"Status :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,sx:{my:.5},children:(0,w.jsx)(P.Z,{label:"Pending",variant:"outlined",size:"small",chipcolor:"warning"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:4,children:(0,w.jsx)(p.Z,{variant:"body2",children:"Order Id :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:8,children:(0,w.jsx)(p.Z,{variant:"body2",component:u.rU,to:"#",children:"#146859"})})]})})]})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(C.Z,{})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"h6",children:"Terms and Condition :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(p.Z,{variant:"body2",children:"lorem ipsum dolor sit connecter adieu siccing eliot, sed do elusion tempore incident ut laborer et dolors magna aliquot."})})]})})]})})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,md:10,lg:8,children:(0,w.jsx)(Z.ZP,{container:!0,spacing:1,justifyContent:"center",sx:{maxWidth:850,mx:"auto",mt:0,mb:2.5,"& > .MuiCardContent-root":{py:{xs:3.75,md:5.5},px:{xs:2.5,md:5}}},children:(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(b.Z,{children:(0,w.jsx)(f(),{trigger:function(){return(0,w.jsx)(j.Z,{variant:"contained",children:"Print"})},content:function(){return e.current}})})})})})]})},A=i(33497),D=i(20563),z=i(35898),I=i(61689),T=i(19536),W=i(24631),B=i(1550),R=i(23306),L=i(88797),O=i(51405),E=i(6415),F=i(74652),M=i(12754),N=i(5866),U=i(54918),Y=i(48514),q=i(70816),H=i.n(q),$=i(54285),G=i(88587),V=i.n(G),X=function(e){var n=e.calculation,i=(0,x.Z)();return(0,w.jsx)(y.Z,{sx:{mx:3,mb:3,bgcolor:"dark"===i.palette.mode?i.palette.dark.main:i.palette.primary.light},children:(0,w.jsx)(Z.ZP,{container:!0,justifyContent:"flex-end",spacing:k.dv,children:(0,w.jsx)(Z.ZP,{item:!0,sm:6,md:6,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",variant:"subtitle1",children:"Amount :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",variant:"body2",children:V()(n.bookingAmountPaid).format({symbol:"\u20b9"})})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",variant:"subtitle1",children:"Deductions :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",variant:"body2",children:V()(n.netDeductions).format({symbol:"\u20b9"})})})]})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsx)(T.Z,{sx:{bgcolor:"dark.main"}})}),(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",color:"secondary",variant:"subtitle1",children:"Earnings :"})}),(0,w.jsx)(Z.ZP,{item:!0,xs:6,children:(0,w.jsx)(p.Z,{align:"right",color:"secondary",variant:"subtitle1",children:V()(null===n||void 0===n?void 0:n.netReceivableByVenueOwner).format({symbol:"\u20b9"})})})]})})]})})})})},J=i(85554),K=i(717),Q={PaperProps:{style:{maxHeight:224,width:250}},chip:{margin:2}},ee=function(e){var n,i,a,l,d,u=e.venueBooking,x=e.refundData,h=e.fetchData,m=(0,M.I0)(),g=(0,$.Z)().user,f=(0,c.useState)(!1),b=(0,r.Z)(f,2),y=b[0],_=b[1],C=(0,c.useState)(!1),S=(0,r.Z)(C,2),D=S[0],q=S[1],G=(0,c.useState)(null),V=(0,r.Z)(G,2),ee=V[0],ne=V[1],ie=(0,c.useState)(""),te=(0,r.Z)(ie,2),re=te[0],oe=te[1],ae=(0,c.useState)(!1),le=(0,r.Z)(ae,2),se=le[0],ce=(le[1],(0,c.useState)("")),de=(0,r.Z)(ce,2),ue=de[0],xe=de[1],ve=(0,c.useState)(""),he=(0,r.Z)(ve,2),me=he[0],Ze=he[1],pe=(0,c.useState)(!1),je=(0,r.Z)(pe,2),ge=je[0],fe=je[1],be=(0,J.v9)((function(e){return e.tax})).taxes;(0,c.useEffect)((function(){m((0,K.fb)())}),[]);var ye=(0,c.useState)(!1),Pe=(0,r.Z)(ye,2),_e=Pe[0],ke=Pe[1],Ce=(0,c.useState)(""),we=(0,r.Z)(Ce,2),Se=we[0],Ae=we[1],De=(0,c.useRef)(),ze=function(){var e=(0,t.Z)(s().mark((function e(){var n,i,t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={entity:"venue_booking",entity_id:u.booking_id,reason:ee,date:H()().format("YYYY-MM-DD")},e.prev=1,e.next=4,Y.Z.postForm("/api/cancel",(0,o.Z)({},n));case 4:i=e.sent,console.log(i),q(!1),m((0,N.ss)({open:!0,message:"Your venue booking cancellation request is successful. In case of any refund eligibility, check booking details",variant:"alert",alert:{color:"success"},close:!1})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),m((0,N.ss)({open:!0,message:(null===e.t0||void 0===e.t0||null===(t=e.t0.data)||void 0===t?void 0:t.message)||"An error occured",variant:"alert",alert:{color:"error"},close:!1}));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();(0,c.useEffect)((function(){var e=function(e){var n,i;"venue_booking_payment_interaction"===(null===(n=e.data)||void 0===n?void 0:n.type)&&(m((0,N.ss)({open:!0,message:"Payment was successful",variant:"alert",alert:{color:"success"},close:!1})),null===(i=window.paymentWindow)||void 0===i||i.close());console.log(e.data)};return window.addEventListener("message",e,!1),function(){clearInterval(De.current),window.removeEventListener("message",e)}}),[]);var Ie=(0,c.useMemo)((function(){var e="";if("rejected"===(null===u||void 0===u?void 0:u.status))e=u.reject_reason;else if("cancelled"===(null===u||void 0===u?void 0:u.status)){var n;e=null===(n=u.cancel_log)||void 0===n?void 0:n.reason}return e}),[u]);return(0,w.jsxs)(A.Z,{title:null===u||void 0===u||null===(n=u.venue)||void 0===n?void 0:n.title,secondary:(0,w.jsxs)(Z.ZP,{container:!0,spacing:1,item:!0,xs:12,justifyContent:"flex-end",children:[("booked"===(null===u||void 0===u?void 0:u.status)||"accepted"===(null===u||void 0===u?void 0:u.status))&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(j.Z,{variant:"outlined",label:"Cancel",onClick:function(){q(!0)},color:"error",children:"Cancel Booking"})}),("pending"===(null===u||void 0===u?void 0:u.status)||"accepted_with_booking_amount"===(null===u||void 0===u?void 0:u.status))&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(j.Z,{variant:"outlined",label:"Reject",onClick:function(){ke(!0)},color:"error",children:"Reject"})}),"pending"===(null===u||void 0===u?void 0:u.status)&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(j.Z,{variant:"outlined",label:"Cancel",onClick:function(){oe(""),Ze(""),fe(!0)},color:"success",children:"Approve"})}),"accepted_with_booking_amount"===(null===u||void 0===u?void 0:u.status)&&(null===u||void 0===u?void 0:u.venue_owner_id)!=(null===g||void 0===g?void 0:g.id)&&(0,w.jsx)(Z.ZP,{item:!0,children:(0,w.jsx)(j.Z,{variant:"outlined",label:"Cancel",onClick:function(){_(!0)},color:"success",children:"Process Payment"})})]}),children:[(0,w.jsxs)(Z.ZP,{container:!0,spacing:2,children:[(0,w.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(z.Z,{spacing:1,children:[(0,w.jsx)(p.Z,{children:"Booking Status: "}),(0,w.jsx)(I.Z,{title:Ie,placement:"top-end",children:(0,w.jsx)("span",{children:(0,w.jsx)(P.Z,{label:null===(i=k.au[null===u||void 0===u?void 0:u.status])||void 0===i?void 0:i.title,size:"small",chipcolor:null===(a=k.au[null===u||void 0===u?void 0:u.status])||void 0===a?void 0:a.color,variant:"outlined",sx:{maxWidth:"fit-content"}})})}),(0,w.jsx)(p.Z,{children:null===(l=k.au[null===u||void 0===u?void 0:u.status])||void 0===l?void 0:l.description})]})}),("booked"===(null===u||void 0===u?void 0:u.status)||"accepted"===(null===u||void 0===u?void 0:u.status)||"cancelled"===(null===u||void 0===u?void 0:u.status))&&(0,w.jsx)(Z.ZP,{item:!0,xs:12,sm:6,children:(0,w.jsxs)(z.Z,{spacing:1,children:[(0,w.jsx)(p.Z,{children:"Advance Amount Paid: "}),(0,w.jsx)(P.Z,{label:(0,U.$)(null===u||void 0===u?void 0:u.advance_amount),size:"small",chipcolor:"success",variant:"outlined",sx:{maxWidth:"fit-content"}})]})}),x&&(0,w.jsx)(Z.ZP,{item:!0,xs:12,children:(0,w.jsxs)(z.Z,{spacing:1,direction:"row",alignItems:"center",children:[(0,w.jsx)(p.Z,{children:"Refund Amount: "}),(0,w.jsx)(P.Z,{label:"".concat(x.status," : ").concat((0,U.$)(x.amount)),size:"small",chipcolor:"completed"===x.status?"success":"orange",variant:"outlined",sx:{maxWidth:"fit-content"}})]})})]}),(null===g||void 0===g?void 0:g.id)===(null===u||void 0===u?void 0:u.venue_owner_id)&&!(null!==u&&void 0!==u&&u.is_cancel)&&"booked"===(null===u||void 0===u?void 0:u.status)&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(T.Z,{sx:{my:1}}),(0,w.jsxs)(z.Z,{spacing:1,children:[(0,w.jsx)(p.Z,{children:"Earnings: "}),(0,w.jsx)(X,{calculation:null===(d=u.transaction)||void 0===d?void 0:d.amount_calculations})]})]}),(0,w.jsx)(E.Z,{open:y,setOpen:_,confirmLabel:"Continue",onConfirm:function(){var e={id:u.booking_id};m((0,F.HF)(e,(function(e){var n=null===e||void 0===e?void 0:e.payment_link;if(n){var i=window.open(n,"popUpWindow","height=500,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes");window.paymentWindow=i,De.current=setInterval((function(){i.closed&&(clearInterval(De.current),h(u.booking_id))}),1e3),_(!1)}else m((0,N.ss)({open:!0,message:"Please try again later",variant:"alert",alert:{color:"error"},close:!1}))}),(function(e){m((0,N.ss)({open:!0,message:(null===e||void 0===e?void 0:e.message)||"An error occured",variant:"alert",alert:{color:"error"},close:!1}))})))},onCancel:function(){return _(!1)},invertButtons:!0,title:(0,w.jsxs)("span",{children:["Proceed to pay the booking amount ",(0,w.jsx)("b",{children:(0,U.$)(null===u||void 0===u?void 0:u.advance_amount)}),"?"]})}),(0,w.jsx)(E.Z,{open:D,setOpen:q,onConfirm:ze,onCancel:function(){return q(!1)},confirmLabel:"Cancel Booking",cancelLabel:"Close",allowEscape:!1,allowClickAway:!1,confirmButtonProps:{disabled:""==(null===ee||void 0===ee?void 0:ee.trim())},content:(0,w.jsxs)(z.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(W.Z,{size:"small",label:"Cancel Reason",value:ee,onChange:function(e){return ne(e.target.value)}}),(!ee||""==(null===ee||void 0===ee?void 0:ee.trim()))&&(0,w.jsx)(p.Z,{color:"error",variant:"caption",children:"Please fill cancel reason"})]})}),(0,w.jsx)(E.Z,{open:ge,setOpen:fe,confirmLabel:"Approve",onConfirm:function(){var e={id:u.booking_id,advance_amount:re>0?re:void 0,final_amount:me||0,status:re>0?"accepted_with_booking_amount":"accepted",tax_ids:ue?"".concat(ue):null,_method:"put"};m((0,F.lW)(e,(function(){fe(!1)}),(function(e){var n;console.log(e),m((0,N.ss)({open:!0,message:(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.message)||"An error occured",variant:"alert",alert:{color:"error"},close:!1}))})))},onCancel:function(){return fe(!1)},invertButtons:!0,content:(0,w.jsxs)(z.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(W.Z,{type:"number",size:"small",label:"Advance Amount",value:re,onChange:function(e){return oe(e.target.value)}}),(0,w.jsx)(W.Z,{type:"number",size:"small",label:"Final Amount(optional)",value:me,onChange:function(e){return Ze(e.target.value)}}),(0,w.jsx)(z.Z,{spacing:1,children:(0,w.jsx)("div",{children:(0,w.jsxs)(B.Z,{fullWidth:!0,children:[(0,w.jsx)(R.Z,{id:"test-select-label",children:"Tax"}),(0,w.jsxs)(L.Z,{id:"ticket_tax_ids",name:"ticket_tax_ids",labelId:"test-select-label",label:"Tax",fullWidth:!0,value:ue,onChange:function(e){xe(e.target.value)},renderValue:function(e){var n=be.find((function(n){return n.id===e})),i=n.title,t=n.rate,r=n.rate_type,o="".concat(i," (").concat(t).concat("percent"===r?"%":"\u20b9",")");return(0,w.jsx)(v.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:(0,w.jsx)(P.Z,{label:o},e)})},MenuProps:Q,children:[(0,w.jsx)(O.Z,{value:"",children:"No Tax"},"-1"),be.filter((function(e){return se&&"inclusive"===e.net_price||!se&&"exclusive"===e.net_price})).map((function(e){var n=e.title,i=e.rate,t=e.rate_type,r=e.id;return(0,w.jsx)(O.Z,{value:r,children:"".concat(n," (").concat(i).concat("percent"===t?"%":"\u20b9",")")},r)}))]})]})})}),(Number.isNaN(parseFloat(re))||parseFloat(re)<0)&&(0,w.jsx)(p.Z,{color:"error",variant:"caption",children:"Advance Amount should be greater than or equal to 0"})]})}),(0,w.jsx)(E.Z,{open:_e,setOpen:ke,onConfirm:function(){var e={id:u.booking_id,reject_reason:Se,status:"rejected",_method:"put"};m((0,F.lW)(e,(function(){ke(!1)})))},onCancel:function(){return ke(!1)},confirmLabel:"Reject",content:(0,w.jsxs)(z.Z,{spacing:2,sx:{mt:1},children:[(0,w.jsx)(W.Z,{size:"small",label:"Reject Reason",value:Se,onChange:function(e){return Ae(e.target.value)}}),(!Se||""==(null===Se||void 0===Se?void 0:Se.trim()))&&(0,w.jsx)(p.Z,{color:"error",variant:"caption",children:"Please fill reject reason"})]})})]})},ne=["children","value","index"];function ie(e){var n=e.children,i=e.value,t=e.index,r=(0,a.Z)(e,ne);return(0,w.jsx)("div",(0,o.Z)((0,o.Z)({role:"tabpanel",hidden:i!==t,id:"simple-tabpanel-".concat(t),"aria-labelledby":"simple-tab-".concat(t)},r),{},{children:i===t&&(0,w.jsx)(v.Z,{sx:{p:0},children:n})}))}var te=function(e){var n,i,a=e.parentBookingId,l=(0,x.Z)(),v=(0,c.useState)(0),Z=(0,r.Z)(v,2),p=Z[0],j=Z[1],g=(0,c.useState)(null),f=(0,r.Z)(g,2),b=f[0],y=f[1],P=(0,c.useState)(null),_=(0,r.Z)(P,2),k=_[0],C=_[1],z=(0,d.UO)().bookingId,I=(0,c.useMemo)((function(){return a||z}),[a,z]),T=function(){var e=(0,t.Z)(s().mark((function e(n){var i,t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.Z.get("/api/venue-bookings/".concat(n));case 3:t=e.sent,(r=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data).is_cancel&&(r.status="cancelled"),y(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(n){return e.apply(this,arguments)}}(),W=function(){var e=(0,t.Z)(s().mark((function e(n){var i,t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.Z.get("/api/refund/".concat(n));case 3:t=e.sent,r=null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.data,C(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){I&&T(I)}),[I,p]),(0,c.useEffect)((function(){var e,n=null===b||void 0===b||null===(e=b.cancel_log)||void 0===e?void 0:e.refund_id;n&&W(n)}),[null===b||void 0===b||null===(n=b.cancel_log)||void 0===n?void 0:n.refund_id]),(0,w.jsxs)(A.Z,{children:[(0,w.jsx)(h.Z,{value:p,indicatorColor:"primary",textColor:"primary",onChange:function(e,n){j(n)},variant:"scrollable","aria-label":"simple tabs example",sx:{"& a":{minHeight:"auto",minWidth:10,px:1,py:1.5,mr:2.25,color:l.palette.grey[600],display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"},"& a.Mui-selected":{color:l.palette.primary.main},"& a > svg":{marginBottom:"0px !important",marginRight:1.25},mb:3},children:(0,w.jsx)(m.Z,(0,o.Z)({icon:(0,w.jsx)(D.Z,{}),component:u.rU,to:"#",label:"Details"},(i=0,{id:"simple-tab-".concat(i),"aria-controls":"simple-tabpanel-".concat(i)})))}),(0,w.jsx)(ie,{value:p,index:0,children:(0,w.jsx)(ee,{venueBooking:b,refundData:k,fetchData:T})}),(0,w.jsx)(ie,{value:p,index:1,children:(0,w.jsx)(S,{bookingForOrder:b})})]})}}}]);