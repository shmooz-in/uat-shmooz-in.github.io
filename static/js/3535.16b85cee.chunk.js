"use strict";(self.webpackChunkshmooz=self.webpackChunkshmooz||[]).push([[3535],{73535:function(e,n,t){t.r(n);var r=t(15861),i=t(29439),c=t(1413),l=t(64687),s=t.n(l),o=t(47313),a=t(2135),d=t(19860),u=t(23477),h=t(24076),x=t(67478),p=t(44758),f=t(82558),Z=t(9506),g=t(9289),v=t(61113),j=t(61689),m=t(47131),b=t(93405),S=t(9019),k=t(24631),w=t(41727),C=t(42420),P=t(51629),y=t(66835),z=t(57861),E=t(70024),A=t(62323),D=t(94469),I=t(50282),L=t(33497),O=t(25823),R=t(55281),W=t(51997),_=t(44289),q=t(94788),B=t(49854),J=t(57983),M=t(83033),N=t(53286),T=t(54285),U=t(46417);function F(e,n,t){var r=n[t];!0===n[t]?r=1:!1===n[t]&&(r=0);var i=e[t];return!0===e[t]?i=1:!1===e[t]&&(i=0),r<i?-1:r>i?1:0}var G=function(e,n){return"desc"===e?function(e,t){return F(e,t,n)}:function(e,t){return-F(e,t,n)}};function H(e,n){var t=e.map((function(e,n){return[e,n]}));return t.sort((function(e,t){var r=n(e[0],t[0]);return 0!==r?r:e[1]-t[1]})),t.map((function(e){return e[0]}))}var K=[{id:"title",numeric:!1,label:"Event Name",align:"left"},{id:"description",numeric:!1,label:"Description",align:"left"},{id:"publish",numeric:!1,label:"Published?",align:"center"},{id:"status",numeric:!1,label:"Status",align:"center"}];function Q(e){var n=e.onSelectAllClick,t=e.order,r=e.orderBy,i=e.numSelected,c=e.rowCount,l=e.onRequestSort,s=e.selected;return(0,U.jsxs)(u.Z,{children:[(0,U.jsx)(h.Z,{children:i>0&&(0,U.jsx)(x.Z,{padding:"none",colSpan:8,children:(0,U.jsx)(V,{numSelected:s.length})})}),(0,U.jsxs)(h.Z,{children:[(0,U.jsx)(x.Z,{padding:"checkbox",sx:{pl:3},children:(0,U.jsx)(p.Z,{color:"primary",indeterminate:i>0&&i<c,checked:c>0&&i===c,onChange:n,inputProps:{"aria-label":"select all desserts"}})}),K.map((function(e){return(0,U.jsx)(x.Z,{align:e.align,padding:e.disablePadding?"none":"normal",sortDirection:r===e.id&&t,children:(0,U.jsxs)(f.Z,{active:r===e.id,direction:r===e.id?t:"asc",onClick:(n=e.id,function(e){l(e,n)}),children:[e.label,r===e.id?(0,U.jsx)(Z.Z,{component:"span",sx:I.Z,children:"desc"===t?"sorted descending":"sorted ascending"}):null]})},e.id);var n}))]})]})}var V=function(e){var n=e.numSelected;return(0,U.jsxs)(g.Z,{sx:(0,c.Z)({p:0,pl:1,pr:1},n>0&&{color:function(e){return e.palette.secondary.main}}),children:[n>0?(0,U.jsxs)(v.Z,{color:"inherit",variant:"h4",children:[n," Selected"]}):(0,U.jsx)(v.Z,{variant:"h6",id:"tableTitle",children:"Nutrition"}),(0,U.jsx)(Z.Z,{sx:{flexGrow:1}}),n>0&&(0,U.jsx)(j.Z,{title:"Delete",children:(0,U.jsx)(m.Z,{size:"large",children:(0,U.jsx)(W.Z,{fontSize:"small"})})})]})};n.default=function(){var e=(0,T.Z)().user,n=(0,d.Z)(),t=(0,O.I0)(),c=o.useState("desc"),l=(0,i.Z)(c,2),u=l[0],f=l[1],Z=o.useState("id"),g=(0,i.Z)(Z,2),I=g[0],W=g[1],F=o.useState([]),K=(0,i.Z)(F,2),V=K[0],X=K[1],Y=o.useState(0),$=(0,i.Z)(Y,2),ee=$[0],ne=$[1],te=o.useState(5),re=(0,i.Z)(te,2),ie=re[0],ce=re[1],le=o.useState(""),se=(0,i.Z)(le,2),oe=se[0],ae=se[1],de=(0,o.useState)(null),ue=(0,i.Z)(de,2),he=ue[0],xe=ue[1],pe=o.useState(!1),fe=(0,i.Z)(pe,2),Ze=fe[0],ge=fe[1],ve=function(){xe(null),ge(!1)},je=o.useState([]),me=(0,i.Z)(je,2),be=me[0],Se=me[1],ke=(0,O.v9)((function(e){return console.log(e),e.event})).events;o.useEffect((function(){t((0,R.vw)({user_id:null!==e&&void 0!==e&&e.isAdmin||null===e||void 0===e?void 0:e.id}))}),[t]);var we=function(e,n){var t=e;if(ae(t||""),t){var r=n.filter((function(e){var n=!0,r=!1;return["title","description"].forEach((function(n){var i;null!==(i=e[n])&&void 0!==i&&i.toString().toLowerCase().includes(t.toString().toLowerCase())&&(r=!0)})),r||(n=!1),n}));Se(r)}else Se(n)};o.useEffect((function(){we(oe,ke)}),[ke]);var Ce=ee>0?Math.max(0,(1+ee)*ie-be.length):0,Pe=function(){var e=(0,r.Z)(s().mark((function e(n,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return e.next=3,t((0,R.Ed)(r,n.target.checked));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),ye=function(){var e=(0,r.Z)(s().mark((function e(n,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=3;break}return e.next=3,t((0,R.d2)(r,n.target.checked));case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();return(0,U.jsxs)(L.Z,{title:"Event List",content:!1,children:[(0,U.jsx)(b.Z,{children:(0,U.jsxs)(S.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",spacing:2,children:[(0,U.jsx)(S.ZP,{item:!0,xs:12,sm:6,children:(0,U.jsx)(k.Z,{InputProps:{startAdornment:(0,U.jsx)(w.Z,{position:"start",children:(0,U.jsx)(J.Z,{fontSize:"small"})})},onChange:function(e){return we(e.target.value,ke)},placeholder:"Search Event",value:oe,size:"small"})}),(0,U.jsxs)(S.ZP,{item:!0,xs:12,sm:6,sx:{textAlign:"right"},children:[(0,U.jsx)(j.Z,{title:"Copy",children:(0,U.jsx)(m.Z,{size:"large",children:(0,U.jsx)(B.Z,{})})}),(0,U.jsx)(j.Z,{title:"Print",children:(0,U.jsx)(m.Z,{size:"large",children:(0,U.jsx)(q.Z,{})})}),(0,U.jsx)(j.Z,{title:"Filter",children:(0,U.jsx)(m.Z,{size:"large",children:(0,U.jsx)(_.Z,{})})}),(0,U.jsx)(j.Z,{title:"Add Event",children:(0,U.jsx)(C.Z,{color:"primary",size:"small",LinkComponent:a.rU,to:"/manage/event-edit",sx:{boxShadow:"none",ml:1,width:32,height:32,minHeight:32},children:(0,U.jsx)(M.Z,{fontSize:"small"})})})]})]})}),(0,U.jsx)(P.Z,{children:(0,U.jsxs)(y.Z,{sx:{minWidth:750},"aria-labelledby":"tableTitle",children:[(0,U.jsx)(Q,{theme:n,numSelected:V.length,order:u,orderBy:I,onSelectAllClick:function(e){if(e.target.checked)if(V.length>0)X([]);else{var n=be.map((function(e){return e.title}));X(n)}else X([])},onRequestSort:function(e,n){f(I===n&&"asc"===u?"desc":"asc"),W(n)},rowCount:be.length,selected:V}),(0,U.jsxs)(z.Z,{children:[H(be,G(u,I)).slice(ee*ie,ee*ie+ie).map((function(e,n){if("number"===typeof e)return null;var r,i=(r=e.title,-1!==V.indexOf(r)),c="enhanced-table-checkbox-".concat(n);return(0,U.jsxs)(h.Z,{hover:!0,role:"checkbox","aria-checked":i,tabIndex:-1,selected:i,children:[(0,U.jsx)(x.Z,{padding:"checkbox",sx:{pl:3},onClick:function(n){return function(e,n){var t=V.indexOf(n),r=[];-1===t?r=r.concat(V,n):0===t?r=r.concat(V.slice(1)):t===V.length-1?r=r.concat(V.slice(0,-1)):t>0&&(r=r.concat(V.slice(0,t),V.slice(t+1))),X(r)}(0,e.title)},children:(0,U.jsx)(p.Z,{color:"primary",checked:i,inputProps:{"aria-labelledby":c}})}),(0,U.jsx)(x.Z,{component:"th",id:c,scope:"row",sx:{cursor:"pointer"},children:(0,U.jsx)(v.Z,{component:a.rU,to:"/manage/event-edit/".concat(null===e||void 0===e?void 0:e.slug),variant:"subtitle1",sx:{overflow:"hidden",display:"block",textOverflow:"ellipsis",whiteSpace:"nowrap",":hover":{color:"primary.main"},cursor:"pointer",textDecoration:"none"},children:e.title})}),(0,U.jsx)(x.Z,{children:e.description}),(0,U.jsx)(x.Z,{align:"center",children:(0,U.jsx)(E.Z,{checked:e.publish,color:"".concat(e.publish?"success":"error"),inputProps:{"aria-label":"controlled"},onChange:function(n,r){var i={id:e.id,publish:n.target.checked,step:"detail",_method:"put"};t((0,R.eJ)(i,(function(){return ye(n,e)}),(function(){})))}})}),(0,U.jsx)(x.Z,{align:"center",children:(0,U.jsx)(E.Z,{checked:e.status,color:"".concat(e.status?"success":"error"),inputProps:{"aria-label":"controlled"},onChange:function(n,r){var i={id:e.id,status:n.target.checked,step:"detail",_method:"put"};t((0,R.eJ)(i,(function(){return Pe(n,e)}),(function(){})))}})})]},n)})),Ce>0&&(0,U.jsx)(h.Z,{style:{height:53*Ce},children:(0,U.jsx)(x.Z,{colSpan:6})})]})]})}),(0,U.jsx)(A.Z,{rowsPerPageOptions:[5,10,25],component:"div",count:be.length,rowsPerPage:ie,page:ee,onPageChange:function(e,n){ne(n)},onRowsPerPageChange:function(e){ce(parseInt(null===e||void 0===e?void 0:e.target.value,10)),ne(0)}}),(0,U.jsx)(D.Z,{maxWidth:"md",scroll:"paper",fullWidth:!0,onClose:ve,open:Ze,sx:{"& .MuiDialog-paper":{p:0}},children:Ze&&(0,U.jsx)(N.default,{event:he,open:Ze,handleCloseDialog:ve,onCancel:ve})})]})}}}]);