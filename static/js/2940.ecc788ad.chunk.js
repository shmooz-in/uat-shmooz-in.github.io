"use strict";(self.webpackChunkshmooz=self.webpackChunkshmooz||[]).push([[2940],{72940:function(e,n,t){t.r(n);var r=t(15861),a=t(29439),c=t(64687),s=t.n(c),i=t(7276),o=t(95173),l=t(45254),u=t(50169),d=t(81239),f=t(65173),h=t(20045),v=t(85535),m=t(6334),p=t(31342),x=t(53904),g=t(43767),Z=t(15097),j=t(56742),k=t(96156),E=t(93449),I=t(4471),A=t(83303),R=t(45263);n.default=function(){var e=(0,u.Z)(),n=(0,j.I0)(),t=(0,o.UO)().code,c=(0,A.Z)().user,b=(0,o.s0)(),w=(0,i.useState)("NOT_PROCESSED"),P=(0,a.Z)(w,2),S=P[0],y=P[1],C=(0,d.Z)(e.breakpoints.down("md")),L=function(){var e=(0,r.Z)(s().mark((function e(){var r,a,c,i,o,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=atob(t),e.prev=1,e.next=4,E.Z.postForm("/api/bookings/attendance",{order_number:new URLSearchParams(r).get("order_number"),ticket_id:new URLSearchParams(r).get("ticket_id")});case 4:a=e.sent,console.log(a),y("MARKED"),n((0,I.ss)({open:!0,message:"Attendance Marked",variant:"alert",alert:{color:"success"},close:!1})),e.next=17;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),o="Please try again later",l="error","booking attendees already checked in"===(null===(c=e.t0.data)||void 0===c||null===(i=c.message)||void 0===i?void 0:i.toLowerCase())?(y("ALREADY_MARKED"),o="Attendance Already Marked",l="warning"):y("ERROR"),n((0,I.ss)({open:!0,message:o,variant:"alert",alert:{color:l},close:!1}));case 17:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){null!==c&&void 0!==c&&c.id&&L()}),[t]);var D=(0,i.useState)(0),_=(0,a.Z)(D,2),M=_[0],U=_[1];return(0,i.useEffect)((function(){var e=setInterval((function(){M>0&&U(M-1),0===M&&clearInterval(e)}),1e3);return function(){clearInterval(e)}}),[M]),(0,i.useEffect)((function(){if("SUCCESS"===S||"INVALID"===S||"ALREADY_MARKED"===S){var e="INVALID"===S?k.GW:k.tu;U(5),e&&setTimeout((function(){b(e)}),5e3)}return function(){}}),[S]),(0,R.jsx)(x.Z,{children:(0,R.jsxs)(f.ZP,{container:!0,direction:"column",spacing:g.dv,alignItems:"center",justifyContent:"center",sx:{my:3},children:[(0,R.jsx)(f.ZP,{item:!0,xs:12,children:(0,R.jsxs)(h.Z,{alignItems:"center",spacing:2,children:[(0,R.jsx)(v.Z,{align:"center",variant:C?"h2":"h1",sx:{fontWeight:400,color:"grey.500"},children:g.I8[S]}),M>0&&(0,R.jsx)(v.Z,{variant:"caption",children:"Redirecting in (00:".concat(M<10?"0".concat(M):M,")")})]})}),(0,R.jsx)(f.ZP,{item:!0,xs:12,children:(0,R.jsx)(m.Z,{})}),(0,R.jsx)(f.ZP,{item:!0,xs:12,children:(0,R.jsx)(f.ZP,{direction:C?"column-reverse":"row",container:!0,spacing:3,alignItems:C?"":"center",justifyContent:"space-between",children:(0,R.jsx)(f.ZP,{item:!0,children:(0,R.jsx)(p.Z,{component:l.rU,to:k.E6,variant:"text",startIcon:(0,R.jsx)(Z.Z,{}),children:"Continue Shmoozing"})})})})]})})}},15097:function(e,n,t){var r=t(64836);n.Z=void 0;var a=r(t(34921)),c=t(45263),s=(0,a.default)((0,c.jsx)("path",{d:"M21 11H6.83l3.58-3.59L9 6l-6 6 6 6 1.41-1.41L6.83 13H21z"}),"KeyboardBackspace");n.Z=s}}]);